System.register(["jimu-core","jimu-ui","jimu-core/react"],(function(e,t){var o={},r={},a={};return{setters:[function(e){o.jimuHistory=e.jimuHistory},function(e){r.Button=e.Button},function(e){a.default=e.default,a.useEffect=e.useEffect,a.useState=e.useState}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=o},1315:e=>{"use strict";e.exports=a},726:e=>{"use strict";e.exports=r}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var i={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(i),n.d(i,{__set_webpack_public_path__:()=>a,default:()=>r});var e=n(8891),t=n(726),o=n(1315);function r(r){var a,n,i;const s=r.config||{},[l,c]=(0,o.useState)("undefined"!=typeof window&&localStorage.getItem("customTheme")||"light"),[d,u]=(0,o.useState)("dark"===l),[g,m]=(0,o.useState)(!1),[f,h]=(0,o.useState)("checking"),v=()=>{if("undefined"!=typeof window)try{const e=sessionStorage.getItem("exb_auth"),t=localStorage.getItem("exb_auth");e&&!t?(localStorage.setItem("exb_auth",e),sessionStorage.removeItem("exb_auth"),h("synced")):e&&t?(e!==t&&(localStorage.setItem("exb_auth",e),sessionStorage.removeItem("exb_auth")),h("synced")):h(t&&!e?"local":"none")}catch(e){console.error("🔐 Auth: Error checking authentication:",e),h("error")}};(0,o.useEffect)((()=>{v();const e=setInterval(v,2e3),t=()=>{v()};window.addEventListener("sessionStorageChange",t);const o=sessionStorage.setItem;sessionStorage.setItem=function(e,t){o.apply(this,arguments),"exb_auth"===e&&window.dispatchEvent(new Event("sessionStorageChange"))};const r=sessionStorage.removeItem;sessionStorage.removeItem=function(e){r.apply(this,arguments),"exb_auth"===e&&window.dispatchEvent(new Event("sessionStorageChange"))};const a=localStorage.setItem;localStorage.setItem=function(e,t){a.apply(this,arguments),"exb_auth"===e&&v()};const n=localStorage.removeItem;return localStorage.removeItem=function(e){n.apply(this,arguments),"exb_auth"===e&&v()},()=>{clearInterval(e),window.removeEventListener("sessionStorageChange",t),sessionStorage.setItem=o,sessionStorage.removeItem=r,localStorage.setItem=a,localStorage.removeItem=n}}),[]),(0,o.useEffect)((()=>{}),[f]);const p="undefined"!=typeof window&&localStorage.getItem("locale")||"ru";(0,o.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("customTheme")||"light";c(e),u("dark"===e)};window.addEventListener("storage",e),window.addEventListener("theme-changed",e);const t=setInterval(e,0);return()=>{window.removeEventListener("storage",e),window.removeEventListener("theme-changed",e),clearInterval(t)}}),[]);const S=d&&s.bgColorDark||s.bgColor,w=d&&s.textColorDark||s.textColor,b=d&&s.hoverBgColorDark||s.hoverBgColor,y=d&&s.hoverTextColorDark||s.hoverTextColor,x=d&&s.borderColorDark||s.borderColor,I=d&&s.hoverBorderColorDark||s.hoverBorderColor,_=s.buttonText,E=s.linkConfig,C=s.image,k=s.imageDark,j=s.imageMode||"fit",A=s.imagePosition||"center",D=s.maintainAspectRatio||!1,z={borderRadius:s.borderRadius||8,borderWidth:s.borderWidth||"1px",borderStyle:s.borderStyle||"solid",borderColor:g&&I||x,padding:s.padding||"0px 0px",fontSize:s.fontSize||16,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:g&&b||S,color:g&&y||w,transition:"all 0.2s",gap:8,overflow:"hidden",position:"relative"},N=Object.assign(Object.assign({width:(null===(a=s.imageSize)||void 0===a?void 0:a.width)?`${s.imageSize.width}px`:"100%",height:D&&(null===(n=s.imageSize)||void 0===n?void 0:n.width)?"auto":(null===(i=s.imageSize)||void 0===i?void 0:i.height)?`${s.imageSize.height}px`:"100%",objectFit:"fill"===j?"fill":"stretch"===j?"cover":"contain",position:"absolute"},(()=>{switch(A){case"left":return{left:"4px",top:"50%",transform:"translateY(-50%)"};case"right":return{right:"4px",top:"50%",transform:"translateY(-50%)"};case"top":return{top:"4px",left:"50%",transform:"translateX(-50%)"};case"bottom":return{bottom:"4px",left:"50%",transform:"translateX(-50%)"};default:return{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}})()),{zIndex:0,padding:"0px",borderRadius:z.borderRadius,pointerEvents:"none",userSelect:"none"}),T={position:"relative",zIndex:1,color:z.color,fontSize:z.fontSize,textAlign:"center",width:"100%",wordBreak:"break-word"},B=(L=d?k:C)?"string"==typeof L?L:"object"==typeof L&&L.url?L.url:"":"";var L;return o.default.createElement(t.Button,{style:z,onClick:()=>{localStorage.getItem("exb_auth")||(console.warn("🔐 Auth: No authentication found, attempting to sync..."),v(),setTimeout((()=>{localStorage.getItem("exb_auth")||console.error("🔐 Auth: Authentication sync failed, navigation may not work")}),100)),(null==E?void 0:E.value)?((t,o)=>{localStorage.getItem("exb_auth")?console.error("🔐 Auth: Authentication verified before navigation"):console.warn("🔐 Auth: No authentication found, navigation may fail");let r=!1;if("page"===o||"PAGE"===o)try{if(e.jimuHistory.changePage(t),r=!0,s.removeSelectedDamAfterNavigation)try{localStorage.removeItem("selected_dam")}catch(e){console.warn("🗑️ Storage: Failed to remove selected_dam from localStorage:",e)}}catch(e){console.error(" Navigation: jimuHistory failed, trying URL-based navigation:",e)}if(!r&&("page"===o||"PAGE"===o))try{const e=window.location.href,o=new URLSearchParams(window.location.search);o.set("page",t);const a=`${e.split("?")[0]}?${o.toString()}`;if(s.removeSelectedDamAfterNavigation)try{localStorage.removeItem("selected_dam")}catch(e){console.warn("🗑️ Storage: Failed to remove selected_dam from localStorage:",e)}window.location.href=a,r=!0}catch(e){console.error("🔄 Navigation: All navigation methods failed:",e)}if("webAddress"===o||"WEB_ADDRESS"===o)try{const e=(null==E?void 0:E.openInNewTab)||!1;if(s.removeSelectedDamAfterNavigation)try{localStorage.removeItem("selected_dam")}catch(e){console.warn("🗑️ Storage: Failed to remove selected_dam from localStorage:",e)}window.open(t,e?"_blank":"_self"),r=!0}catch(e){console.error("🔄 Navigation: Failed to open web address:",e)}})(E.value,E.linkType):console.warn("🔄 Navigation: No link configuration found")},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1)},B&&o.default.createElement("img",{src:B,alt:"",style:N}),o.default.createElement("span",{style:T},"string"==typeof _?_:"object"==typeof _&&null!==_&&(_[p]||Object.values(_)[0])||""))}function a(e){n.p=e}})(),i})())}}}));