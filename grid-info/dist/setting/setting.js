System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/basic/color-picker","jimu-ui/advanced/data-source-selector","jimu-core/react"],(function(e,t){var o={},a={},l={},r={},i={},n={};return{setters:[function(e){o.DataSourceManager=e.DataSourceManager,o.DataSourceTypes=e.DataSourceTypes,o.Immutable=e.Immutable,o.jsx=e.jsx},function(e){a.SettingRow=e.SettingRow},function(e){l.Button=e.Button,l.NumericInput=e.NumericInput,l.Option=e.Option,l.Select=e.Select,l.Switch=e.Switch,l.TextInput=e.TextInput},function(e){r.ColorPicker=e.ColorPicker},function(e){i.DataSourceSelector=e.DataSourceSelector},function(e){n.useEffect=e.useEffect,n.useState=e.useState}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=o},1315:e=>{"use strict";e.exports=n},726:e=>{"use strict";e.exports=l},338:e=>{"use strict";e.exports=i},7756:e=>{"use strict";e.exports=a},1362:e=>{"use strict";e.exports=r}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,s),l.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var c={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(c),s.d(c,{__set_webpack_public_path__:()=>n,default:()=>i});var e=s(8891),t=s(7756),o=s(726),a=s(1362),l=s(338),r=s(1315);function i(i){const{config:n,id:s,useDataSources:c,onSettingChange:d}=i,[u,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[C,b]=(0,r.useState)([]);(0,r.useEffect)((()=>{if((null==c?void 0:c.length)>0){const t=e.DataSourceManager.getInstance().getDataSource(c[0].dataSourceId);if(t){const e=t.getSchema(),o=Object.values(e.fields||{});b(o)}}}),[c]),(0,r.useEffect)((()=>{n.bgColor||h("bgColor",{color:"#f5f5f5"}),n.gridGap||h("gridGap","12px"),n.gridWidth||h("gridWidth","100%"),n.gridHeight||h("gridHeight","auto"),n.gridOrientation||h("gridOrientation","horizontal"),n.cardBgColor||h("cardBgColor",{color:"#ffffff"}),n.cardBorderRadius||h("cardBorderRadius","10px"),n.cardPadding||h("cardPadding","16px"),n.cardBorderWidth||h("cardBorderWidth","1px"),n.cardBorderColor||h("cardBorderColor",{color:"#cccccc"}),n.cardDisplay||h("cardDisplay","column"),n.cardWidth||h("cardWidth","100%"),n.cardHeight||h("cardHeight","100%"),n.textColor||h("textColor",{color:"#000000"}),n.labelColor||h("labelColor",{color:"#4A4A4A"}),n.labelFontSize||h("labelFontSize","14px"),n.valueFontSize||h("valueFontSize","20px"),n.labelFontWeight||h("labelFontWeight","500"),n.valueFontWeight||h("valueFontWeight","700")}),[n]);const h=(e,t)=>{d({id:s,config:n.set(e,t)}),(e.includes("Color")||e.includes("color"))&&window.dispatchEvent(new CustomEvent("customThemeChanged"))};(0,r.useEffect)((()=>{n.statsConfig||d({id:s,config:n.set("statsConfig",[{labelKey:"fpu",field:"fpu"},{labelKey:"designVolume",field:"fact_volum"},{labelKey:"designArea",field:"fact_squar"},{labelKey:"npu",field:"npu"},{labelKey:"bathymetricVolume",field:"project_vo"},{labelKey:"bathymetricArea",field:"project_sq"},{labelKey:"dso",field:"umo"},{labelKey:"volumeDiff",field:"terrain_he"},{labelKey:"areaDiff",field:"max_height"}])})}),[]);const w=(e,t,o)=>{const a=[...n.statsConfig||[]];a[e]=Object.assign(Object.assign({},a[e]),{[t]:o}),d({id:s,config:n.set("statsConfig",a)})},v=(0,e.Immutable)([e.DataSourceTypes.FeatureLayer]),S={borderTop:"1px solid var(--light-300)",padding:"16px 12px",marginTop:12},m={display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"bold",paddingInline:"12px",marginBottom:"8px"},y={paddingLeft:"12px",paddingRight:"12px"};return(0,e.jsx)("div",{className:"widget-setting"},(0,e.jsx)("div",{style:Object.assign(Object.assign({},S),{borderTop:"none",marginTop:0})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},m),{marginBottom:12})},(0,e.jsx)("span",null,"Источник данных")),(0,e.jsx)(l.DataSourceSelector,{mustUseDataSource:!0,types:v,useDataSources:c,onChange:e=>{d({id:s,useDataSources:e})},widgetId:s})),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Поля карточек"),(0,e.jsx)(o.Button,{type:"primary",onClick:()=>{const e=[...n.statsConfig||[],{labelKey:"",field:""}];d({id:s,config:n.set("statsConfig",e)})}},"Добавить")),(n.statsConfig||[]).map(((a,l)=>{var r,i,c;return(0,e.jsx)("div",{key:l,style:{marginBottom:8,borderBottom:"1px solid #ccc",paddingBottom:8}},(0,e.jsx)(t.SettingRow,{label:"Label (Uz)"},(0,e.jsx)(o.TextInput,{value:(null===(r=a.labelText)||void 0===r?void 0:r.uz)||"",onChange:e=>w(l,"labelText",Object.assign(Object.assign({},a.labelText),{uz:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:"Label (Кирилл)"},(0,e.jsx)(o.TextInput,{value:(null===(i=a.labelText)||void 0===i?void 0:i.uzcryl)||"",onChange:e=>w(l,"labelText",Object.assign(Object.assign({},a.labelText),{uzcryl:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:"Label (Рус)"},(0,e.jsx)(o.TextInput,{value:(null===(c=a.labelText)||void 0===c?void 0:c.ru)||"",onChange:e=>w(l,"labelText",Object.assign(Object.assign({},a.labelText),{ru:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:`Field #${l+1}`,flow:"wrap"},(0,e.jsx)(o.Select,{value:a.field,onChange:e=>w(l,"field",e.target.value)},C.map(((t,a)=>(0,e.jsx)(o.Option,{key:a,value:t.jimuName},t.alias||t.name))))),(0,e.jsx)(o.Button,{type:"danger",size:"sm",onClick:()=>(e=>{const t=[...n.statsConfig||[]];t.splice(e,1),d({id:s,config:n.set("statsConfig",t)})})(l)},"Удалить"))}))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Grid Styles"),(0,e.jsx)(o.Switch,{checked:u,onChange:e=>g(e.target.checked)})),u&&(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:"Grid Background Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.bgColor||"#f5f5f5",onChange:e=>h("bgColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Grid Gap (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(n.gridGap)||12,onChange:e=>h("gridGap",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Grid Width",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:n.gridWidth||"100%",onChange:e=>h("gridWidth",e.target.value),placeholder:"e.g., 100% or 500px"})),(0,e.jsx)(t.SettingRow,{label:"Grid Height",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:n.gridHeight||"auto",onChange:e=>h("gridHeight",e.target.value),placeholder:"e.g., auto or 500px"})),(0,e.jsx)(t.SettingRow,{label:"Grid Orientation",flow:"wrap"},(0,e.jsx)(o.Select,{value:n.gridOrientation||"horizontal",onChange:e=>h("gridOrientation",e.target.value)},(0,e.jsx)(o.Option,{value:"horizontal"},"Horizontal (Cards in Rows)"),(0,e.jsx)(o.Option,{value:"vertical"},"Vertical (Cards in Columns)"))),(0,e.jsx)(t.SettingRow,{label:"Grid Template Columns",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:n.gridTemplateColumns||"repeat(3, 1fr)",onChange:e=>h("gridTemplateColumns",e.target.value),placeholder:"e.g., repeat(3, 1fr) or 1fr 2fr"})))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Card Styles"),(0,e.jsx)(o.Switch,{checked:x,onChange:e=>p(e.target.checked)})),x&&(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:"Card Background Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.cardBgColor||"#ffffff",onChange:e=>h("cardBgColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Radius (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(n.cardBorderRadius)||10,onChange:e=>h("cardBorderRadius",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Padding (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(n.cardPadding)||16,onChange:e=>h("cardPadding",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Width (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(n.cardBorderWidth)||1,onChange:e=>h("cardBorderWidth",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.cardBorderColor||"#cccccc",onChange:e=>h("cardBorderColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Card Content Orientation",flow:"wrap"},(0,e.jsx)(o.Select,{value:n.cardDisplay||"column",onChange:e=>h("cardDisplay",e.target.value)},(0,e.jsx)(o.Option,{value:"column"},"Vertical"),(0,e.jsx)(o.Option,{value:"row"},"Horizontal"))),(0,e.jsx)(t.SettingRow,{label:"Card Width",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:n.cardWidth||"100%",onChange:e=>h("cardWidth",e.target.value),placeholder:"e.g., 100% or 200px"})),(0,e.jsx)(t.SettingRow,{label:"Card Height",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:n.cardHeight||"100%",onChange:e=>h("cardHeight",e.target.value),placeholder:"e.g., 100% or 200px"})))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Text Styles"),(0,e.jsx)(o.Switch,{checked:f,onChange:e=>j(e.target.checked)})),f&&(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:"Value Text Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.textColor||"#000000",onChange:e=>h("textColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Value Font Size (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(n.valueFontSize)||20,onChange:e=>h("valueFontSize",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Value Font Weight",flow:"wrap"},(0,e.jsx)(o.Select,{value:n.valueFontWeight||"700",onChange:e=>h("valueFontWeight",e.target.value)},(0,e.jsx)(o.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(o.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(o.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(o.Option,{value:"700"},"Bold (700)"))),(0,e.jsx)(t.SettingRow,{label:"Label Text Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.labelColor||"#4A4A4A",onChange:e=>h("labelColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Label Font Size (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(n.labelFontSize)||14,onChange:e=>h("labelFontSize",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Label Font Weight",flow:"wrap"},(0,e.jsx)(o.Select,{value:n.labelFontWeight||"500",onChange:e=>h("labelFontWeight",e.target.value)},(0,e.jsx)(o.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(o.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(o.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(o.Option,{value:"700"},"Bold (700)"))))),(0,e.jsx)("div",{style:Object.assign(Object.assign({},S),{background:"#23272f",borderRadius:10,marginTop:32})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},m),{color:"#fff",fontWeight:700,fontSize:17,marginBottom:14})},"Цвета для тёмной темы"),(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Grid Background (bgColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.bgColorDark||"#23272f",onChange:e=>h("bgColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Background (cardBgColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.cardBgColorDark||"#23272f",onChange:e=>h("cardBgColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Border Color (cardBorderColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.cardBorderColorDark||"#444",onChange:e=>h("cardBorderColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Value Text Color (textColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.textColorDark||"#fff",onChange:e=>h("textColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Label Text Color (labelColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:n.labelColorDark||"#aaa",onChange:e=>h("labelColorDark",e)})))))}function n(e){s.p=e}})(),c})())}}}));