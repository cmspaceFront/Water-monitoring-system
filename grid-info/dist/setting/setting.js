System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/basic/color-picker","jimu-ui/advanced/data-source-selector","jimu-core/react"],(function(e,a){var t={},o={},l={},r={},n={},i={};return{setters:[function(e){t.DataSourceManager=e.DataSourceManager,t.DataSourceTypes=e.DataSourceTypes,t.Immutable=e.Immutable,t.jsx=e.jsx},function(e){o.SettingRow=e.SettingRow},function(e){l.Button=e.Button,l.NumericInput=e.NumericInput,l.Option=e.Option,l.Select=e.Select,l.Switch=e.Switch,l.TextInput=e.TextInput},function(e){r.ColorPicker=e.ColorPicker},function(e){n.DataSourceSelector=e.DataSourceSelector},function(e){i.useEffect=e.useEffect,i.useState=e.useState}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=t},1315:e=>{"use strict";e.exports=i},726:e=>{"use strict";e.exports=l},338:e=>{"use strict";e.exports=n},7756:e=>{"use strict";e.exports=o},1362:e=>{"use strict";e.exports=r}},a={};function s(t){var o=a[t];if(void 0!==o)return o.exports;var l=a[t]={exports:{}};return e[t](l,l.exports,s),l.exports}s.d=(e,a)=>{for(var t in a)s.o(a,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var c={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(c),s.d(c,{__set_webpack_public_path__:()=>i,default:()=>n});var e=s(8891),a=s(7756),t=s(726),o=s(1362),l=s(338),r=s(1315);function n(n){const{config:i,id:s,useDataSources:c,onSettingChange:u}=n,[d,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[b,C]=(0,r.useState)([]);(0,r.useEffect)((()=>{if((null==c?void 0:c.length)>0){const a=e.DataSourceManager.getInstance().getDataSource(c[0].dataSourceId);if(a){const e=a.getSchema(),t=Object.values(e.fields||{});C(t)}}}),[c]),(0,r.useEffect)((()=>{i.bgColor||w("bgColor",{color:"#f5f5f5"}),i.gridGap||w("gridGap","12px"),i.gridWidth||w("gridWidth","100%"),i.gridHeight||w("gridHeight","auto"),i.gridOrientation||w("gridOrientation","horizontal"),i.cardBgColor||w("cardBgColor",{color:"#ffffff"}),i.cardBorderRadius||w("cardBorderRadius","10px"),i.cardPadding||w("cardPadding","16px"),i.cardBorderWidth||w("cardBorderWidth","1px"),i.cardBorderColor||w("cardBorderColor",{color:"#cccccc"}),i.cardDisplay||w("cardDisplay","column"),i.cardWidth||w("cardWidth","100%"),i.cardHeight||w("cardHeight","100%"),i.textColor||w("textColor",{color:"#000000"}),i.labelColor||w("labelColor",{color:"#4A4A4A"}),i.labelFontSize||w("labelFontSize","14px"),i.valueFontSize||w("valueFontSize","20px"),i.labelFontWeight||w("labelFontWeight","500"),i.valueFontWeight||w("valueFontWeight","700"),i.labelValueFlexDirection||w("labelValueFlexDirection","row"),i.labelValueJustifyContent||w("labelValueJustifyContent","center"),i.labelValueFlexGap||w("labelValueFlexGap","8px"),void 0===i.showLabelValueFlexGap&&w("showLabelValueFlexGap",!0),void 0===i.showColonSeparator&&w("showColonSeparator",!0)}),[i]);const w=(e,a)=>{u({id:s,config:i.set(e,a)}),(e.includes("Color")||e.includes("color"))&&window.dispatchEvent(new CustomEvent("customThemeChanged"))};(0,r.useEffect)((()=>{i.statsConfig||u({id:s,config:i.set("statsConfig",[{labelKey:"fpu",field:"fpu"},{labelKey:"designVolume",field:"fact_volum"},{labelKey:"designArea",field:"fact_squar"},{labelKey:"npu",field:"npu"},{labelKey:"bathymetricVolume",field:"project_vo"},{labelKey:"bathymetricArea",field:"project_sq"},{labelKey:"dso",field:"umo"},{labelKey:"volumeDiff",field:"terrain_he"},{labelKey:"areaDiff",field:"max_height"}])})}),[]);const h=(e,a,t)=>{const o=[...i.statsConfig||[]];o[e]=Object.assign(Object.assign({},o[e]),{[a]:t}),u({id:s,config:i.set("statsConfig",o)})},v=(0,e.Immutable)([e.DataSourceTypes.FeatureLayer]),S={borderTop:"1px solid var(--light-300)",padding:"16px 12px",marginTop:12},m={display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"bold",paddingInline:"12px",marginBottom:"8px"},y={paddingLeft:"12px",paddingRight:"12px"};return(0,e.jsx)("div",{className:"widget-setting"},(0,e.jsx)("div",{style:Object.assign(Object.assign({},S),{borderTop:"none",marginTop:0})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},m),{marginBottom:12})},(0,e.jsx)("span",null,"Источник данных")),(0,e.jsx)(l.DataSourceSelector,{mustUseDataSource:!0,types:v,useDataSources:c,onChange:e=>{u({id:s,useDataSources:e})},widgetId:s})),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Поля карточек"),(0,e.jsx)(t.Button,{type:"primary",onClick:()=>{const e=[...i.statsConfig||[],{labelKey:"",field:""}];u({id:s,config:i.set("statsConfig",e)})}},"Добавить")),(i.statsConfig||[]).map(((o,l)=>{var r,n,c;return(0,e.jsx)("div",{key:l,style:{marginBottom:8,borderBottom:"1px solid #ccc",paddingBottom:8}},(0,e.jsx)(a.SettingRow,{label:"Label (Uz)"},(0,e.jsx)(t.TextInput,{value:(null===(r=o.labelText)||void 0===r?void 0:r.uz)||"",onChange:e=>h(l,"labelText",Object.assign(Object.assign({},o.labelText),{uz:e.target.value}))})),(0,e.jsx)(a.SettingRow,{label:"Label (Кирилл)"},(0,e.jsx)(t.TextInput,{value:(null===(n=o.labelText)||void 0===n?void 0:n.uzcryl)||"",onChange:e=>h(l,"labelText",Object.assign(Object.assign({},o.labelText),{uzcryl:e.target.value}))})),(0,e.jsx)(a.SettingRow,{label:"Label (Рус)"},(0,e.jsx)(t.TextInput,{value:(null===(c=o.labelText)||void 0===c?void 0:c.ru)||"",onChange:e=>h(l,"labelText",Object.assign(Object.assign({},o.labelText),{ru:e.target.value}))})),(0,e.jsx)(a.SettingRow,{label:`Field #${l+1}`,flow:"wrap"},(0,e.jsx)(t.Select,{value:o.field,onChange:e=>h(l,"field",e.target.value)},b.map(((a,o)=>(0,e.jsx)(t.Option,{key:o,value:a.jimuName},a.alias||a.name))))),(0,e.jsx)(t.Button,{type:"danger",size:"sm",onClick:()=>(e=>{const a=[...i.statsConfig||[]];a.splice(e,1),u({id:s,config:i.set("statsConfig",a)})})(l)},"Удалить"))}))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Grid Styles"),(0,e.jsx)(t.Switch,{checked:d,onChange:e=>g(e.target.checked)})),d&&(0,e.jsx)("div",{style:y},(0,e.jsx)(a.SettingRow,{label:"Grid Background Color",flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.bgColor||"#f5f5f5",onChange:e=>w("bgColor",e)})),(0,e.jsx)(a.SettingRow,{label:"Grid Gap (px)",flow:"wrap"},(0,e.jsx)(t.NumericInput,{value:parseInt(i.gridGap)||12,onChange:e=>w("gridGap",`${e}px`)})),(0,e.jsx)(a.SettingRow,{label:"Grid Width",flow:"wrap"},(0,e.jsx)(t.TextInput,{value:i.gridWidth||"100%",onChange:e=>w("gridWidth",e.target.value),placeholder:"e.g., 100% or 500px"})),(0,e.jsx)(a.SettingRow,{label:"Grid Height",flow:"wrap"},(0,e.jsx)(t.TextInput,{value:i.gridHeight||"auto",onChange:e=>w("gridHeight",e.target.value),placeholder:"e.g., auto or 500px"})),(0,e.jsx)(a.SettingRow,{label:"Grid Orientation",flow:"wrap"},(0,e.jsx)(t.Select,{value:i.gridOrientation||"horizontal",onChange:e=>w("gridOrientation",e.target.value)},(0,e.jsx)(t.Option,{value:"horizontal"},"Horizontal (Cards in Rows)"),(0,e.jsx)(t.Option,{value:"vertical"},"Vertical (Cards in Columns)"))),(0,e.jsx)(a.SettingRow,{label:"Grid Template Columns",flow:"wrap"},(0,e.jsx)(t.TextInput,{value:i.gridTemplateColumns||"repeat(3, 1fr)",onChange:e=>w("gridTemplateColumns",e.target.value),placeholder:"e.g., repeat(3, 1fr) or 1fr 2fr"})))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Card Styles"),(0,e.jsx)(t.Switch,{checked:x,onChange:e=>p(e.target.checked)})),x&&(0,e.jsx)("div",{style:y},(0,e.jsx)(a.SettingRow,{label:"Card Background Color",flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.cardBgColor||"#ffffff",onChange:e=>w("cardBgColor",e)})),(0,e.jsx)(a.SettingRow,{label:"Card Border Radius (px)",flow:"wrap"},(0,e.jsx)(t.NumericInput,{value:parseInt(i.cardBorderRadius)||10,onChange:e=>w("cardBorderRadius",`${e}px`)})),(0,e.jsx)(a.SettingRow,{label:"Card Padding (px)",flow:"wrap"},(0,e.jsx)(t.NumericInput,{value:parseInt(i.cardPadding)||16,onChange:e=>w("cardPadding",`${e}px`)})),(0,e.jsx)(a.SettingRow,{label:"Card Border Width (px)",flow:"wrap"},(0,e.jsx)(t.NumericInput,{value:parseInt(i.cardBorderWidth)||1,onChange:e=>w("cardBorderWidth",`${e}px`)})),(0,e.jsx)(a.SettingRow,{label:"Card Border Color",flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.cardBorderColor||"#cccccc",onChange:e=>w("cardBorderColor",e)})),(0,e.jsx)(a.SettingRow,{label:"Card Content Orientation",flow:"wrap"},(0,e.jsx)(t.Select,{value:i.cardDisplay||"column",onChange:e=>w("cardDisplay",e.target.value)},(0,e.jsx)(t.Option,{value:"column"},"Vertical"),(0,e.jsx)(t.Option,{value:"row"},"Horizontal"))),(0,e.jsx)(a.SettingRow,{label:"Card Width",flow:"wrap"},(0,e.jsx)(t.TextInput,{value:i.cardWidth||"100%",onChange:e=>w("cardWidth",e.target.value),placeholder:"e.g., 100% or 200px"})),(0,e.jsx)(a.SettingRow,{label:"Card Height",flow:"wrap"},(0,e.jsx)(t.TextInput,{value:i.cardHeight||"100%",onChange:e=>w("cardHeight",e.target.value),placeholder:"e.g., 100% or 200px"})))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Text Styles"),(0,e.jsx)(t.Switch,{checked:f,onChange:e=>j(e.target.checked)})),f&&(0,e.jsx)("div",{style:y},(0,e.jsx)(a.SettingRow,{label:"Value Text Color",flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.textColor||"#000000",onChange:e=>w("textColor",e)})),(0,e.jsx)(a.SettingRow,{label:"Value Font Size (px)",flow:"wrap"},(0,e.jsx)(t.NumericInput,{value:parseInt(i.valueFontSize)||20,onChange:e=>w("valueFontSize",`${e}px`)})),(0,e.jsx)(a.SettingRow,{label:"Value Font Weight",flow:"wrap"},(0,e.jsx)(t.Select,{value:i.valueFontWeight||"700",onChange:e=>w("valueFontWeight",e.target.value)},(0,e.jsx)(t.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(t.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(t.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(t.Option,{value:"700"},"Bold (700)"))),(0,e.jsx)(a.SettingRow,{label:"Label Text Color",flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.labelColor||"#4A4A4A",onChange:e=>w("labelColor",e)})),(0,e.jsx)(a.SettingRow,{label:"Label Font Size (px)",flow:"wrap"},(0,e.jsx)(t.NumericInput,{value:parseInt(i.labelFontSize)||14,onChange:e=>w("labelFontSize",`${e}px`)})),(0,e.jsx)(a.SettingRow,{label:"Label Font Weight",flow:"wrap"},(0,e.jsx)(t.Select,{value:i.labelFontWeight||"500",onChange:e=>w("labelFontWeight",e.target.value)},(0,e.jsx)(t.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(t.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(t.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(t.Option,{value:"700"},"Bold (700)"))),(0,e.jsx)(a.SettingRow,{label:"Label-Value Flex Direction",flow:"wrap"},(0,e.jsx)(t.Select,{value:i.labelValueFlexDirection||"row",onChange:e=>w("labelValueFlexDirection",e.target.value)},(0,e.jsx)(t.Option,{value:"row"},"Row (Horizontal)"),(0,e.jsx)(t.Option,{value:"column"},"Column (Vertical)"))),(0,e.jsx)(a.SettingRow,{label:"Label-Value Justify Content",flow:"wrap"},(0,e.jsx)(t.Select,{value:i.labelValueJustifyContent||"center",onChange:e=>w("labelValueJustifyContent",e.target.value)},(0,e.jsx)(t.Option,{value:"center"},"Center"),(0,e.jsx)(t.Option,{value:"flex-start"},"Start"),(0,e.jsx)(t.Option,{value:"flex-end"},"End"),(0,e.jsx)(t.Option,{value:"space-between"},"Space Between"),(0,e.jsx)(t.Option,{value:"space-around"},"Space Around"))),(0,e.jsx)(a.SettingRow,{label:"Show Colon Separator",flow:"wrap"},(0,e.jsx)(t.Switch,{checked:!1!==i.showColonSeparator,onChange:e=>w("showColonSeparator",e.target.checked)})),(0,e.jsx)(a.SettingRow,{label:"Show Label-Value Gap",flow:"wrap"},(0,e.jsx)(t.Switch,{checked:!1!==i.showLabelValueFlexGap,onChange:e=>w("showLabelValueFlexGap",e.target.checked)})),!1!==i.showLabelValueFlexGap&&(0,e.jsx)(a.SettingRow,{label:"Label-Value Flex Gap (px)",flow:"wrap"},(0,e.jsx)(t.NumericInput,{value:parseInt(i.labelValueFlexGap)||8,onChange:e=>w("labelValueFlexGap",`${e}px`)})))),(0,e.jsx)("div",{style:Object.assign(Object.assign({},S),{background:"#23272f",borderRadius:10,marginTop:32})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},m),{color:"#fff",fontWeight:700,fontSize:17,marginBottom:14})},"Цвета для тёмной темы"),(0,e.jsx)("div",{style:y},(0,e.jsx)(a.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Grid Background (bgColorDark)"),flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.bgColorDark||"#23272f",onChange:e=>w("bgColorDark",e)})),(0,e.jsx)(a.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Background (cardBgColorDark)"),flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.cardBgColorDark||"#23272f",onChange:e=>w("cardBgColorDark",e)})),(0,e.jsx)(a.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Border Color (cardBorderColorDark)"),flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.cardBorderColorDark||"#444",onChange:e=>w("cardBorderColorDark",e)})),(0,e.jsx)(a.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Value Text Color (textColorDark)"),flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.textColorDark||"#fff",onChange:e=>w("textColorDark",e)})),(0,e.jsx)(a.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Label Text Color (labelColorDark)"),flow:"wrap"},(0,e.jsx)(o.ColorPicker,{color:i.labelColorDark||"#aaa",onChange:e=>w("labelColorDark",e)})))))}function i(e){s.p=e}})(),c})())}}}));