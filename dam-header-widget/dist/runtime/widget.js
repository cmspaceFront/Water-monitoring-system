System.register(["jimu-core","jimu-core/react"],(function(e,t){var r={},a={};return{setters:[function(e){r.DataSourceComponent=e.DataSourceComponent,r.DataSourceManager=e.DataSourceManager,r.jsx=e.jsx},function(e){a.useEffect=e.useEffect,a.useState=e.useState}],execute:function(){e((()=>{var e={3541:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r(8081),o=r.n(a),n=r(3645),i=r.n(n)()(o());i.push([e.id,'.dam-header-widget{width:100%;height:100%;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:var(--header-bg-color, #ffffff);border-radius:var(--header-border-radius, 0);box-shadow:var(--header-box-shadow, none);overflow:hidden;display:flex;flex-direction:column}.dam-header-widget[data-theme=dark]{--header-bg-color: #2d2d2d;--header-text-color: #ffffff;--header-top-strip-color: #666666;--header-separator-color: #555555;--header-border-color: #666666}.dam-header-widget[data-theme=dark] .dam-header-button{border-color:#666;color:#fff}.dam-header-widget[data-theme=dark] .dam-header-button:hover{background:rgba(255,255,255,.1);border-color:#888}.dam-header-widget[data-theme=dark] .dam-header-year-selector{border-color:#666;color:#fff}.dam-header-widget[data-theme=dark] .dam-header-year-selector:hover{background:rgba(255,255,255,.1);border-color:#888}.dam-header-container{width:100%;flex:1;display:flex;flex-direction:column}.dam-header-top-strip{height:4px;background:var(--header-top-strip-color, #4a4a4a);width:100%}.dam-header-content{display:flex;align-items:center;justify-content:space-between;padding:var(--header-padding, 0 20px);min-height:var(--header-height, 60px);flex:1}.dam-header-left,.dam-header-center,.dam-header-right{display:flex;align-items:center;gap:12px}.dam-header-center{flex:1;justify-content:center}.dam-header-title{margin:0;font-size:var(--header-title-font-size, 18px);font-weight:var(--header-title-font-weight, bold);color:var(--header-text-color, #333333);text-align:center}.dam-header-button{display:flex;align-items:center;gap:8px;padding:8px 16px;background:rgba(0,0,0,0);border:1px solid #e0e0e0;border-radius:6px;color:var(--header-text-color, #333333);font-size:var(--header-font-size, 14px);font-weight:var(--header-font-weight, normal);cursor:pointer;transition:all .2s ease}.dam-header-button:hover{background:#f5f5f5;border-color:#d0d0d0}.dam-header-icon{display:flex;align-items:center;justify-content:center}.dam-header-year-selector{display:flex;align-items:center;gap:8px;padding:8px 16px;background:rgba(0,0,0,0);border:1px solid #e0e0e0;border-radius:6px;color:var(--header-text-color, #333333);font-size:var(--header-font-size, 14px);cursor:pointer;transition:all .2s ease;min-width:80px;justify-content:center}.dam-header-year-selector:hover{background:#f5f5f5;border-color:#d0d0d0}.dam-header-separator{margin:0;border:none;height:1px;background:var(--header-separator-color, #e0e0e0)}@media(max-width: 768px){.dam-header-content{flex-direction:column;gap:16px;padding:16px}.dam-header-left,.dam-header-center,.dam-header-right{width:100%;justify-content:center}.dam-header-title{font-size:16px}}',""]);const d=i},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",a=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),a&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),a&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,a,o,n){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var d=0;d<this.length;d++){var l=this[d][0];null!=l&&(i[l]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);a&&i[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},3379:e=>{"use strict";var t=[];function r(e){for(var r=-1,a=0;a<t.length;a++)if(t[a].identifier===e){r=a;break}return r}function a(e,a){for(var n={},i=[],d=0;d<e.length;d++){var l=e[d],s=a.base?l[0]+a.base:l[0],c=n[s]||0,u="".concat(s," ").concat(c);n[s]=c+1;var p=r(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var f=o(h,a);a.byIndex=d,t.splice(d,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var n=a(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<n.length;i++){var d=r(n[i]);t[d].references--}for(var l=a(e,o),s=0;s<n.length;s++){var c=r(n[s]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}n=l}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var a=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(r)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var a="";r.supports&&(a+="@supports (".concat(r.supports,") {")),r.media&&(a+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(a+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),a+=r.css,o&&(a+="}"),r.media&&(a+="}"),r.supports&&(a+="}");var n=r.sourceMap;n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},8891:e=>{"use strict";e.exports=r},1315:e=>{"use strict";e.exports=a}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={id:r,exports:{}};return e[r](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="",o.nc=void 0;var n={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(n),o.d(n,{__set_webpack_public_path__:()=>C,default:()=>k});var e=o(8891),t=o(1315);const r={uz:{_widgetLabel:"Bogʻ maʼlumotlari sarlavhasi",downloadPassport:"Pasportni yuklab olish",close:"Yopish",year:"Yil",selectYear:"Yilni tanlang",damNames:{chorvoq:"Chorvoq suv ombori",ohangaron:"Ohangaron suv ombori",tashkent:"Tashkent suv ombori"}},uzcryl:{_widgetLabel:"Боғ маълумотлари сарлавҳаси",downloadPassport:"Паспортни юклаб олиш",close:"Ёпиш",year:"Йил",selectYear:"Йилни танланг",damNames:{chorvoq:"Чорвоқ сув омбори",ohangaron:"Оҳангарон сув омбори",tashkent:"Тошкент сув омбори"}},ru:{_widgetLabel:"Заголовок информации о водохранилище",downloadPassport:"Скачать паспорт",close:"Закрыть",year:"Год",selectYear:"Выберите год",damNames:{chorvoq:"Чарвакское водохранилище",ohangaron:"Ахангаранское водохранилище",tashkent:"Ташкентское водохранилище"}}};var a=o(3379),i=o.n(a),d=o(7795),l=o.n(d),s=o(569),c=o.n(s),u=o(3565),p=o.n(u),h=o(9216),f=o.n(h),g=o(4589),m=o.n(g),v=o(3541),b={};b.styleTagTransform=m(),b.setAttributes=p(),b.insert=c().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=f(),i()(v.Z,b),v.Z&&v.Z.locals&&v.Z.locals;var x=function(e,t,r,a){return new(r||(r=Promise))((function(o,n){function i(e){try{l(a.next(e))}catch(e){n(e)}}function d(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,d)}l((a=a.apply(e,t||[])).next())}))};const y={SELECTED_YEAR:"selected-year",SELECTED_DAM:"selected_dam",DAM_SORT_ORDER:"dam-sort-order",SELECTED_REGION:"selected-region",CUSTOM_LOCALE:"custom_locale"};function w(e){return localStorage.getItem(e)}function S(){try{const e=localStorage.getItem("exb_auth");if(e)try{const t=JSON.parse(e);if(t.email)return t.email;if(t.user&&t.user.email)return t.user.email;if(t.username&&t.username.includes("@"))return t.username}catch(e){}const t=Object.keys(localStorage).filter((e=>e.includes("portalApp")||e.includes("portal")||e.includes("token")||e.includes("credential")));for(const e of t)try{const t=localStorage.getItem(e),r=JSON.parse(t||"{}");if(r.email)return r.email}catch(e){e instanceof Error&&e.message;continue}const r=Object.keys(localStorage);for(const e of r)try{const t=localStorage.getItem(e);if(t&&(t.includes('"email"')||t.includes("farhodmf")||t.includes("@"))){const e=JSON.parse(t);if(e.email)return e.email}}catch(t){const r=localStorage.getItem(e);if(r&&r.includes("@")&&r.length<100)return r;continue}return null}catch(e){return null}}function k(a){var o,n,i,d,l,s;const[c,u]=(0,t.useState)([]),[p,h]=(0,t.useState)([]),[f,g]=(0,t.useState)(null),[m,v]=(0,t.useState)(null),[b,k]=(0,t.useState)("uz"),[C,E]=(0,t.useState)("light"),[_,j]=(0,t.useState)("Tashkent Reservoir"),[z,L]=(0,t.useState)(!1),[T,D]=(0,t.useState)(!1),[I,R]=(0,t.useState)(null),[O,A]=(0,t.useState)(!0),[M,F]=(0,t.useState)();(0,t.useEffect)((()=>{}),[a.context]);const N=null===(o=a.useDataSources)||void 0===o?void 0:o[0],$=a.config;(0,t.useEffect)((()=>{let e,t,r,a;function o(e){switch(e.key){case y.SELECTED_YEAR:v(e.newValue);break;case y.SELECTED_DAM:e.newValue&&U(e.newValue);break;case y.CUSTOM_LOCALE:k(e.newValue||"uz");break;case"customTheme":E(e.newValue||"light")}}return window.addEventListener("storage",o),e=setInterval((()=>{const e=w(y.SELECTED_YEAR);e!==m&&v(e)}),100),t=setInterval((()=>{const e=w(y.SELECTED_DAM);e&&e!==f&&U(e)}),100),r=setInterval((()=>{const e=w(y.CUSTOM_LOCALE)||"uz";e!==b&&k(e)}),100),a=setInterval((()=>{const e=w("customTheme")||"light";e!==C&&E(e)}),100),()=>{window.removeEventListener("storage",o),clearInterval(e),clearInterval(t),clearInterval(r),clearInterval(a)}}),[m,f,b,C]),(0,t.useEffect)((()=>{v(w(y.SELECTED_YEAR)),k(w(y.CUSTOM_LOCALE)||"uz"),E(w("customTheme")||"light");const e=w(y.SELECTED_DAM);e&&""!==e.trim()&&(g(e),P(e,w(y.CUSTOM_LOCALE)||"uz"))}),[]),(0,t.useEffect)((()=>{!function(){x(this,void 0,void 0,(function*(){A(!0);try{const e=yield function(){return x(this,arguments,void 0,(function*(e=3,t=1e3){let r=S();if(r)return r;for(let a=1;a<=e;a++)if(yield new Promise((e=>setTimeout(e,t))),r=S(),r)return r;return null}))}(3,1e3);R(e)}catch(e){R(null)}finally{A(!1)}}))}()}),[]),(0,t.useEffect)((()=>{if(I||O)return;const e=setInterval((()=>{const t=S();t&&(R(t),clearInterval(e))}),2e3),t=setTimeout((()=>{clearInterval(e)}),3e4);return()=>{clearInterval(e),clearTimeout(t)}}),[I,O]);const U=e=>{e&&e!==f?(g(e),P(e,b)):!e&&f&&""===e&&(g(null),j("Tashkent Reservoir"))},P=(e,t)=>{try{if(c.length>0){const t=(null==$?void 0:$.damField)||"name",r=c.find((r=>{const a=r.getFieldValue(t);return a&&String(a).toLowerCase()===String(e).toLowerCase()}));if(r){const t=function(e,t){var r,a;if(!e)return t;const o=(null===(a=null===(r=e.getData())||void 0===r?void 0:r.feature)||void 0===a?void 0:a.attributes)||e.getData()||{};let n=o.name||t;return"ru"===b&&o.title_ru?n=o.title_ru:"uz"===b&&o.title_uz_l?n=o.title_uz_l:"uzcryl"===b&&o.title_uz_c&&(n=o.title_uz_c),n}(r,e);return void j(t)}}j(`[ERROR: No data for ${e}]`)}catch(t){j(e)}},H=e=>{var t,a,o,n;const i=null===(a=null===(t=null==$?void 0:$.localization)||void 0===t?void 0:t[e])||void 0===a?void 0:a[b];if("string"==typeof i)return i;const d=null===(o=r[b])||void 0===o?void 0:o[e];if("string"==typeof d)return d;const l=null===(n=r.uz)||void 0===n?void 0:n[e];return"string"==typeof l?l:e};(0,t.useEffect)((()=>{if(!I)return void h([]);const e=(null==$?void 0:$.yearField)||"year",t=(null==$?void 0:$.userAccessField)||"allowed_users",r=function(e,t,r){return t?t.toLowerCase().includes("admin")||t.toLowerCase().includes("farhodmf")?e:e.filter((e=>function(e,t,r){if(!t||!e)return!1;const a=e.getFieldValue(r);return!!a&&a.split(",").map((e=>e.trim().toLowerCase())).includes(t.toLowerCase())}(e,t,r))):[]}(c,I,t),a=function(e,t,r){return r&&"All"!==r?e.filter((e=>e.getFieldValue(t)===r)):e}(r,e,m);h(a),f&&a.length>0&&P(f,b)}),[c,I,m,f,b,null==$?void 0:$.yearField]),(0,t.useEffect)((()=>{f&&P(f,b)}),[f,b]),(0,t.useEffect)((()=>{f&&c.length>0&&P(f,b)}),[c,f,b]),(0,t.useEffect)((()=>{if(!M||!f)return;const e=(null==$?void 0:$.damField)||"name",t=`${e} = '${f}'`,r=[e,"title_uz_l","title_uz_c","title_ru"];M.query({where:t,outFields:r,pageSize:1e3,returnGeometry:!1}).then((e=>{const t=e.records||[];t.length>0?(u(t),h(t),P(f,b)):(u([]),h([]))})).catch((e=>{u([]),h([])}))}),[M,f,null==$?void 0:$.damField]),(0,t.useEffect)((()=>{const e=w(y.SELECTED_DAM);e&&""!==e.trim()&&e!==f&&p.length>0&&U(e)}),[p,f]);const Y=()=>x(this,void 0,void 0,(function*(){if(!(null==$?void 0:$.apiEndpoint))return!1;const e=`${W($.apiEndpoint,"passport")}?dam=${encodeURIComponent(f||"")}&year=${encodeURIComponent(String(m||""))}`,t=yield fetch(e,{method:"GET",headers:Object.assign({},$.apiHeaders||{})});if(!t.ok)return!1;const r=yield t.blob();return 0!==r.size&&(G(r,`passport_${f||"unknown"}_${m||"unknown"}.pdf`),!0)})),B=()=>x(this,void 0,void 0,(function*(){var t;if(!(null==N?void 0:N.dataSourceId))return!1;const r=e.DataSourceManager.getInstance().getDataSource(N.dataSourceId);if(!r)return!1;const o=["dam_key","dam","dam_id","name","title","damb","damb_key"];try{const e=yield null==r?void 0:r.load({where:"1=1",outFields:["*"],returnGeometry:!1},{widgetId:a.id});let n;if((null==e?void 0:e.length)&&(n=null!==(t=e.find((e=>{const t=e.getData();return o.some((e=>{const r=null==t?void 0:t[e];return r&&String(r).toLowerCase()===String(f).toLowerCase()}))})))&&void 0!==t?t:e[0]),!n)return!1;const i=n.getData(),d=["passport_url","passportUrl","passport_pdf","passport","pdf_url"].map((e=>null==i?void 0:i[e])).find((e=>"string"==typeof e&&/^https?:\/\//i.test(e)));if(d){const e=yield(yield fetch(d)).blob();if(e.size>0)return G(e,Z(d)||"passport.pdf"),!0}return!1}catch(e){return!1}})),V=()=>x(this,void 0,void 0,(function*(){if(!f)return!1;try{const e=w(y.CUSTOM_LOCALE)||"uz";let t=function(e,t){if(!e||!(null==t?void 0:t.folderUrl))return null;const r=e.toLowerCase().replace(/[^a-z0-9]/g,"");return`${t.folderUrl.replace("/experience/../","/")}dist/runtime/assets/${r}.pdf`}(f,a.context);if(!t){const e=f.toLowerCase().replace(/[^a-z0-9]/g,"");t=`${window.location.origin}/widgets/dam-header-widget/dist/runtime/assets/${e}.pdf`}if(window.location.origin,f.toLowerCase().replace(/[^a-z0-9]/g,""),yield q(t)){const r=yield fetch(t);if(r.ok){const t=yield r.blob();if(t.size>0)return G(t,`passport_${f}_${e}.pdf`),!0}}return!1}catch(e){return!1}})),q=e=>x(this,void 0,void 0,(function*(){try{return(yield fetch(e,{method:"HEAD"})).ok}catch(e){return!1}})),W=(e,t)=>e?`${e.replace(/\/+$/,"")}/${t.replace(/^\/+/,"")}`:t,G=(e,t)=>{const r=document.createElement("a"),a=URL.createObjectURL(e);r.href=a,r.download=t,document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(a)},Z=e=>{try{return(new URL(e).pathname.split("/").pop()||"").split("?")[0]||null}catch(e){return null}};return O?(0,e.jsx)("div",{className:"jimu-widget",style:{background:"#fff",color:"#000",width:"100%",height:"60px",padding:"20px",margin:"0",position:"relative",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"}},(0,e.jsx)("div",null,(0,e.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:600}},(null===(i=null===(n=null==$?void 0:$.localization)||void 0===n?void 0:n.checkingAuth)||void 0===i?void 0:i[b])||("ru"===b?"Проверка авторизации...":"uz"===b?"Avtorizatsiya tekshirilmoqda...":"Авторизация текширилмоқда...")),(0,e.jsx)("small",{style:{opacity:.7}},(null===(l=null===(d=null==$?void 0:$.localization)||void 0===d?void 0:d.pleaseWait)||void 0===l?void 0:l[b])||("ru"===b?"Пожалуйста, подождите":"uz"===b?"Iltimos kuting":"Илтимос кутинг")))):z?(0,e.jsx)("div",{className:"dam-header-widget-error",style:{padding:20,textAlign:"center",color:"#721c24",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:8,margin:10}},(0,e.jsx)("h3",null,"Something went wrong"),(0,e.jsx)("p",null,"Please refresh the page or contact support."),(0,e.jsx)("button",{onClick:()=>L(!1),style:{background:"#dc3545",color:"white",border:"none",padding:"8px 16px",borderRadius:6,cursor:"pointer"}},"Try Again")):(0,e.jsx)("div",{className:`dam-header-widget ${(null===(s=null==$?void 0:$.styleConfig)||void 0===s?void 0:s.customClass)||""}`,"data-theme":C||"light",style:(()=>{var e,t,r,a,o;const n=(null==$?void 0:$.styleConfig)||{},i="dark"===(C||"light"),d=(e,t,r)=>{var a;const o=t?n[t]:void 0;return i&&null!=o?o:null!==(a=n[e])&&void 0!==a?a:r},l=d("backgroundColor","backgroundColorDark","#ffffff"),s=d("topStripColor","topStripColorDark","#4a4a4a"),c=d("separatorColor","separatorColorDark","#e0e0e0"),u=d("textColor","textColorDark","#333333"),p=d("titleColor","titleColorDark","#111111"),h=d("borderColor","borderColorDark","transparent"),f=!!n.enableGradient,g=d("gradientFrom","gradientFromDark",l),m=d("gradientTo","gradientToDark",l),v=Number(null!==(e=n.gradientAngle)&&void 0!==e?e:0),b=n.shadowPreset||"none",x=null!==(r=null!==(t=n.boxShadow)&&void 0!==t?t:{none:"none",soft:"0 4px 16px rgba(0,0,0,.08)",medium:"0 6px 24px rgba(0,0,0,.12)",strong:"0 10px 32px rgba(0,0,0,.18)",ambient:"0 2px 0 rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.12)"}[b])&&void 0!==r?r:"none",y=Number(null!==(a=n.borderWidth)&&void 0!==a?a:0),w=Number(null!==(o=n.backdropBlur)&&void 0!==o?o:0),S=f?`linear-gradient(${v}deg, ${g}, ${m})`:l;return{"--header-height":n.headerHeight||"60px","--header-padding":n.padding||"0 20px","--gap":n.gap||"8px","--header-bg-color":S,"--header-top-strip-color":s,"--header-separator-color":c,"--header-text-color":u,"--header-title-color":p,"--header-font-size":n.fontSize||"14px","--header-title-font-size":n.titleFontSize||"18px","--header-font-weight":n.fontWeight||"normal","--header-title-font-weight":n.titleFontWeight||"bold","--font-family":n.fontFamily||"Inter, system-ui, sans-serif","--title-font-family":n.titleFontFamily||"Inter, system-ui, sans-serif","--line-height":n.lineHeight||"1.4","--letter-spacing":n.letterSpacing||"0","--title-letter-spacing":n.titleLetterSpacing||"0","--title-transform":n.titleTransform||"none","--header-border-color":h,"--header-border-width":`${y}px`,"--header-border-radius":n.borderRadius||"0","--radius-tl":n.borderTopLeftRadius||"0","--radius-tr":n.borderTopRightRadius||"0","--radius-br":n.borderBottomRightRadius||"0","--radius-bl":n.borderBottomLeftRadius||"0","--header-box-shadow":x,"--backdrop-blur":`${w}px`}})()},N&&(0,e.jsx)(e.DataSourceComponent,{useDataSource:N,widgetId:a.id,onDataSourceCreated:e=>{F(e),f&&setTimeout((()=>{const t=(null==$?void 0:$.damField)||"name",r=`${t} = '${f}'`,a=[t,"title_uz_l","title_uz_c","title_ru"];e.query({where:r,outFields:a,pageSize:1e3,returnGeometry:!1}).then((e=>{const t=e.records||[];t.length>0&&(u(t),h(t),f&&P(f,b))})).catch((e=>{}))}),100)}}),(0,e.jsx)("div",{className:"dam-header-container",style:{position:"relative",height:"var(--header-height)",padding:"var(--header-padding)",color:"var(--header-text-color)",background:"var(--header-bg-color)",display:"grid",gridTemplateColumns:"auto 1fr auto",alignItems:"center",gap:"var(--gap)",borderWidth:"var(--header-border-width)",borderStyle:"solid",borderColor:"var(--header-border-color)",borderRadius:"var(--header-border-radius)",boxShadow:"var(--header-box-shadow)",backdropFilter:"blur(var(--backdrop-blur))",WebkitBackdropFilter:"blur(var(--backdrop-blur))"}},(0,e.jsx)("div",{className:"dam-header-top-strip",style:{position:"absolute",left:0,right:0,top:0,height:3,background:"var(--header-top-strip-color)",borderTopLeftRadius:"var(--radius-tl)",borderTopRightRadius:"var(--radius-tr)"}}),(0,e.jsx)("div",{className:"dam-header-left",style:{display:"flex",alignItems:"center",gap:"8px"}},(0,e.jsx)("button",{className:"dam-header-button",onClick:()=>x(this,void 0,void 0,(function*(){try{if(D(!0),yield V())return void D(!1);if(yield Y())return void D(!1);if(yield B())return void D(!1);alert("PDF topilmadi / Не найден PDF / PDF not found"),D(!1)}catch(e){alert("Yuklab olishda xatolik / Ошибка скачивания / Download error"),D(!1)}})),title:H("downloadPassport"),disabled:!!T,style:{display:"inline-flex",alignItems:"center",gap:8,height:36,padding:"0 12px",borderRadius:10,border:"1px solid var(--header-separator-color)",background:"transparent",color:"var(--header-text-color)",cursor:"pointer"}},(0,e.jsx)("div",{className:"dam-header-icon",style:{display:"flex"}},(0,e.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0},(0,e.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}))),(0,e.jsx)("span",{style:{whiteSpace:"nowrap"}},T?(()=>{var e,t;return(null===(t=null===(e=null==$?void 0:$.localization)||void 0===e?void 0:e.loading)||void 0===t?void 0:t[b])||("ru"===b?"Загрузка...":"uzcryl"===b?"Юкланмоқда...":"Yuklanmoqda...")})():H("downloadPassport"))),(0,e.jsx)("button",{className:"dam-header-button",onClick:()=>{if(c.length>0){const e=(null==$?void 0:$.damField)||"dam_key";c[0].getFieldValue(e)}f&&P(f,b),M||null==N||N.dataSourceId},title:"Debug Translation",style:Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",gap:8,height:36,padding:"0 12px",borderRadius:10,border:"1px solid var(--header-separator-color)",background:"transparent",color:"var(--header-text-color)",cursor:"pointer"}),{background:"#ff6b6b",color:"white",border:"1px solid #ff6b6b"})},(0,e.jsx)("div",{className:"dam-header-icon",style:{display:"flex"}},(0,e.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0},(0,e.jsx)("path",{d:"M9 7h6v10H9z M3 9h2v6H3z M19 9h2v6h-2z"}))),(0,e.jsx)("span",{style:{whiteSpace:"nowrap"}},"Debug"))),(0,e.jsx)("div",{className:"dam-header-center",style:{textAlign:"center"}},(0,e.jsx)("h1",{className:"dam-header-title",style:{margin:0,fontSize:"var(--header-title-font-size)",fontWeight:"var(--header-title-font-weight)",color:"var(--header-title-color)",fontFamily:"var(--title-font-family)",letterSpacing:"var(--title-letter-spacing)",textTransform:"var(--title-transform)",lineHeight:"var(--line-height)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_},_)),(0,e.jsx)("div",{className:"dam-header-right",style:{display:"flex",alignItems:"center",justifyContent:"flex-end"}},(0,e.jsx)("button",{className:"dam-header-button",onClick:()=>{window.history.back()},title:H("close"),style:{display:"inline-flex",alignItems:"center",gap:8,height:36,padding:"0 12px",borderRadius:10,border:"1px solid var(--header-separator-color)",background:"transparent",color:"var(--header-text-color)",cursor:"pointer"}},(0,e.jsx)("div",{className:"dam-header-icon",style:{display:"flex"}},(0,e.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":!0},(0,e.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))),(0,e.jsx)("span",{style:{whiteSpace:"nowrap"}},H("close"))))),(0,e.jsx)("hr",{className:"dam-header-separator",style:{width:"100%",border:0,height:1,background:"var(--header-separator-color)",margin:0,borderBottomLeftRadius:"var(--radius-bl)",borderBottomRightRadius:"var(--radius-br)"}}))}function C(e){o.p=e}})(),n})())}}}));