System.register(["jimu-core/react","jimu-core"],(function(e,t){var l={},o={};return{setters:[function(e){l.default=e.default,l.useEffect=e.useEffect,l.useMemo=e.useMemo,l.useState=e.useState},function(e){o.DataSourceComponent=e.DataSourceComponent}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=o},1315:e=>{"use strict";e.exports=l}},t={};function n(l){var o=t[l];if(void 0!==o)return o.exports;var a=t[l]={exports:{}};return e[l](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var a={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(a),n.d(a,{__set_webpack_public_path__:()=>m,default:()=>v});var e=n(1315),t=n(8891),l=function(e,t,l,o){return new(l||(l=Promise))((function(n,a){function i(e){try{d(o.next(e))}catch(e){a(e)}}function r(e){try{d(o.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,r)}d((o=o.apply(e,t||[])).next())}))};const o="ru",i={todakol:"Тўдакўл сув омбори",chortoq:"Чортоқ сув омбори ",topalang:"Тўпаланг сув омбори",tosinsoy:"Тўсинсой сув омбори ",toshkent:"Тошкент сув омбори ",talimarjon:"Талимаржон сув омбори",kattakorgon:"Каттақўрғон сув омбори",zarkent:"Заркент сув омбори ",zomin:"Зомин сув омбори ",qorovultepa:"Қоровултепа сув омбори ",oktepa:"Оқтепа сув омбори",jiydalisoy:"Жийдалисой сув омбори",ohangaron:"Оҳангарон сув омбори ",pachkamar:"Пачкамар сув омбори ",karkidon:"Каркидон сув омбори",jizzakh:"Жиззах сув омбори",hisorak:"Хисорак сув омбори",qorgontepa:"Қўрғонтепа сув омбори ",chorvoq:"Чорвоқ сув омбори ",quyumozor:"Қуйимозор сув омбори ",oqdaryo:"Оқ дарё сув омбори",shurkul:"Шўркўл сув омбори",qorasuv:"Қорасув сув омбори (Наманган)",uchqizil:"Учқизил сув омбори",qorabog:"Қорабоғ сув омбори",nugayli:"Нуғайли сув омбори",yangikurgan:"Янги Қўрғон сув омбори",qamashi:"Қамаши сув омбори",sobirsoy:"Собирсой сув омбори",degrez:"Дегрез сув омбори",eskiyer:"Эскиер сув омбори",girvansoy:"Ғирвонсой сел омбори",oqbilol:"Оқбилол сел омбори",kengkol:"Кенгкўл сув омбори",omondara:"Омондара сел омбори",rezaksoy:"Резаксой сув омбори",qoratepa:"Қоратепа сув омбори",kamongaron:"Камонгарон сув омбори",mominobod:"Мўминобод сел омбори",kokseraskoy:"Кўксераксой сув омбори",ertikon:"Ертикон сув омбори",langar:"Лангар сув омбори",fargona:"Марказий Фарғона сув омбори",qarasuv:"Қорасув сув омбори",qalqama:"Қалқама сув  омбори",shorabsoy:"Шўробсой сув омбори",dehqonobod:"Деҳқонобод сув омбори",sentabsoy:"Сентобсой сув омбори",koksaroy:"Кўксарой сув омбори",xojamushkent:"Хўжамушкент сув омбори",oqchobsoy:"Оқчобсой сув омбори",shorsuv:"Шўр сув сел омбори",oqbuloq:"Оқбулоқ сув омбори",qizilsuv:"Қизилсув сув омбори",asaka:"Aсака адир сув омбори",qoramurut:"Қорамурт сув омбори",chimqurgon:"Чимқоргон сув омбори ",surxon:"Жанубий-Сурхон сув омбори ",arnasoy:"Aрнасой сув омбори",varziq:"Варзиқ сув омбори ",shorobsoy:"Шўробсой сув омбори"},r=(e,t=0)=>Number.isFinite(Number(e))?Number(e):t,d=e=>{var t;return null!==(t=null==e?void 0:e.toLocaleString("ru-RU").replace(/,/g," "))&&void 0!==t?t:"—"},u=e=>"uz"===e?"m³":"м³",s=(e,t)=>{var l,o,n,a,i,r,d;const u="light"===e;return{cardBackground:(null===(l=null==t?void 0:t.cardBackground)||void 0===l?void 0:l[e])||(u?"#ffffff":"#2a2a2a"),cardBorder:(null===(o=null==t?void 0:t.cardBorder)||void 0===o?void 0:o[e])||(u?"#e0e0e0":"#404040"),cardShadow:(null===(n=null==t?void 0:t.cardShadow)||void 0===n?void 0:n[e])||(u?"0 2px 8px rgba(0,0,0,0.1)":"0 2px 8px rgba(0,0,0,0.3)"),textPrimary:(null===(a=null==t?void 0:t.textPrimary)||void 0===a?void 0:a[e])||(u?"#333333":"#ffffff"),textSecondary:(null===(i=null==t?void 0:t.textSecondary)||void 0===i?void 0:i[e])||(u?"#666666":"#cccccc"),textMuted:(null===(r=null==t?void 0:t.textMuted)||void 0===r?void 0:r[e])||(u?"#999999":"#888888"),svgWaterColor:(null==t?void 0:t.firstColor)||"#2176FF",svgSiltColor:(null==t?void 0:t.secondColor)||"#F0C039",svgWallColor:(null===(d=null==t?void 0:t.svgWallColor)||void 0===d?void 0:d[e])||(u?"#4A4E69":"#6A6E89"),dotWaterColor:(null==t?void 0:t.firstColor)||"#2176FF",dotSiltColor:(null==t?void 0:t.secondColor)||"#F0C039"}};function c({firstPercent:t,secondPercent:l,firstColor:o,secondColor:n,wallColor:a,waterDuration:i=6,waterAmp:r=2,waterLen:d=32,siltDuration:u=28,mudAmpMax:s=6,mudAmpFactor:c=.25,mudLenFactor:v=1.2,bottomRoundness:m=20,svgWidth:f=265,svgHeight:g=87}){const h=l/100*64,p=73-h,y=Math.max(9,p);return Math.min(h,64),e.default.createElement("svg",{width:f,height:g,viewBox:"0 0 265 87",fill:"none",style:{width:`${f}px`,height:`${g}px`,maxWidth:"none",maxHeight:"none"},preserveAspectRatio:"none"},e.default.createElement("g",{clipPath:"url(#clip0_2930_14240)"},e.default.createElement("path",{d:"M205.668 9C200.152 11.3593 192.96 12.667 185.5 12.667C178.04 12.667 170.848 11.3593 165.332 9C159.817 11.3596 152.626 12.6674 145.166 12.6674C137.706 12.6674 130.515 11.3596 125 9C119.485 11.3596 112.294 12.6674 104.834 12.6674C97.3741 12.6674 90.1828 11.3596 84.668 9C79.1521 11.3593 71.9603 12.667 64.5 12.667C57.0397 12.667 49.8479 11.3593 44.332 9C38.8172 11.3596 31.6259 12.6674 24.166 12.6674C16.7061 12.6674 8.0148 12.8596 2.5 10.5L4 75H246V9C240.485 11.3596 233.294 12.6674 225.834 12.6674C218.374 12.6674 211.183 11.3596 205.668 9Z",fill:o,fillOpacity:"0.75"}),e.default.createElement("path",{d:`\n              M5 ${y}\n              L239 ${y}\n              L239 73\n              L31 73\n              Z\n            `,fill:n}),e.default.createElement("mask",{id:"mask0_2987_14120",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"-1",y:"5",width:"248",height:"82"},e.default.createElement("path",{d:"M245.769 85.316L246.696 79.525C246.983 77.7306 244.252 74.7243 242.439 74.6048C214.253 72.7472 78.2055 51.1842 44.0859 48.0528C43.6717 48.0148 43.3301 47.8547 43.0139 47.5844L12.7285 21.6953C12.577 21.5658 12.4457 21.4144 12.339 21.2462L3.18902 6.8173C2.11657 5.12613 -0.5 5.88584 -0.5 7.88838V24.5L0.953152 85.048C0.979205 86.1335 1.8667 87 2.95258 87H43.5H91.5H243.795C244.777 87 245.614 86.2862 245.769 85.316Z",fill:"#9C5825"})),e.default.createElement("g",{mask:"url(#mask0_2987_14120)"},e.default.createElement("path",{d:"M258 -91H-10.9978V178H258V-91Z",fill:"#9C5825"})),e.default.createElement("path",{d:"M245.001 1H238.013L227.871 87H263.001L245.001 1Z",fill:"#5C5E6D"})),e.default.createElement("defs",null,e.default.createElement("clipPath",{id:"clip0_2930_14240"},e.default.createElement("rect",{width:"265",height:"87",fill:"white"}))))}function v(n){var a,v,m,f,g,h,p,y,b,x,S;const{config:w,useDataSources:E,id:C}=n,[k,_]=(0,e.useState)(localStorage.getItem("custom_locale")||o);(0,e.useEffect)((()=>{const e=e=>_(e.detail);return window.addEventListener("custom-locale-changed",e),()=>window.removeEventListener("custom-locale-changed",e)}),[]);const[L,M]=(0,e.useState)(localStorage.getItem("customTheme")||"light");(0,e.useEffect)((()=>{const e=()=>M(localStorage.getItem("customTheme")||"light");window.addEventListener("storage",e),window.addEventListener("theme-changed",e);const t=setInterval(e,100);return()=>{window.removeEventListener("storage",e),window.removeEventListener("theme-changed",e),clearInterval(t)}}),[]);const[z,V]=(0,e.useState)([]),[q,A]=(0,e.useState)(null),[F,I]=(0,e.useState)((n.selectedDam||localStorage.getItem("selected_dam")||"").trim());(0,e.useEffect)((()=>{function e(e){"selected_dam"===e.key&&I((n.selectedDam||e.newValue||"").trim())}function t(){const e=localStorage.getItem("selected_dam")||"";I((n.selectedDam||e||"").trim())}let l=localStorage.getItem("selected_dam")||"";const o=setInterval((()=>{const e=localStorage.getItem("selected_dam")||"";e!==l&&(l=e,I((n.selectedDam||e||"").trim()))}),100);return window.addEventListener("storage",e),window.addEventListener("dam_name_changed",t),window.addEventListener("selected_dam_changed",t),window.addEventListener("dam_selected",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("dam_name_changed",t),window.removeEventListener("selected_dam_changed",t),window.removeEventListener("dam_selected",t),clearInterval(o)}}),[n.selectedDam]),(0,e.useEffect)((()=>{I((n.selectedDam||localStorage.getItem("selected_dam")||"").trim())}),[n.selectedDam]);const W=(null==w?void 0:w.damFilterField)||"Nomi",D=i[F]||F,P=F&&D?`${W} = '${D}'`:"1=1";(0,e.useEffect)((()=>{var e;if(!q)return;const t=null!==(e=null==w?void 0:w.refreshMs)&&void 0!==e?e:6e4,l=setInterval((()=>{var e;return null===(e=q.refresh)||void 0===e?void 0:e.call(q)}),t);return()=>clearInterval(l)}),[q,null==w?void 0:w.refreshMs]),(0,e.useEffect)((()=>{let e=!1;return function(){l(this,void 0,void 0,(function*(){var t;if(!q||!F)return;if(!P||"1=1"===P)return;const l=(null==w?void 0:w.mainAttribute)||"total_capacity",o=(null==w?void 0:w.firstAttribute)||"batim",n=(null==w?void 0:w.secondAttribute)||"silt";try{const a=yield q.query({where:P,outFields:[l,o,n],pageSize:1,returnGeometry:!1});e||V(null!==(t=null==a?void 0:a.records)&&void 0!==t?t:[])}catch(t){e||V([])}}))}(),()=>{e=!0}}),[q,F,null==w?void 0:w.mainAttribute,null==w?void 0:w.firstAttribute,null==w?void 0:w.secondAttribute,P]);const H=(0,e.useMemo)((()=>{var e,t,l;if(z.length){const o=null!==(l=null===(t=null===(e=z[0])||void 0===e?void 0:e.feature)||void 0===t?void 0:t.attributes)&&void 0!==l?l:{},n=(null==w?void 0:w.mainAttribute)||"total_capacity",a=(null==w?void 0:w.firstAttribute)||"batim",i=(null==w?void 0:w.secondAttribute)||"silt";return{mainValue:r(o[n],0),firstValue:r(o[a],0),secondValue:r(o[i],0)}}return{mainValue:0,firstValue:0,secondValue:0}}),[z,null==w?void 0:w.mainAttribute,null==w?void 0:w.firstAttribute,null==w?void 0:w.secondAttribute]),j=(Math.min(100,Math.max(0,H.firstValue/Math.max(1,H.mainValue)*100)),Math.min(100,Math.max(0,H.secondValue/Math.max(1,H.mainValue)*100))),B=Math.min(100,Math.max(0,H.firstValue/Math.max(1,H.mainValue)*100)),$=j,R=e=>(null==w?void 0:w[`${e}_${k}`])||(null==w?void 0:w[`${e}_ru`])||e,T=R("mainLabel"),G=R("firstLabel"),O=R("secondLabel"),Z=s(L,w);return F?e.default.createElement("div",{style:{width:"100%",height:"100%",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center",padding:(null==w?void 0:w.cardPadding)||"16px",boxSizing:"border-box"}},e.default.createElement(t.DataSourceComponent,{useDataSource:null==E?void 0:E[0],widgetId:C,onDataSourceCreated:e=>A(e)}),e.default.createElement("div",{style:{width:`${null!==(a=null==w?void 0:w.cardWidth)&&void 0!==a?a:450}px`,height:`${null!==(v=null==w?void 0:w.cardHeight)&&void 0!==v?v:200}px`,background:Z.cardBackground,borderRadius:null!==(m=null==w?void 0:w.borderRadius)&&void 0!==m?m:16,border:`1px solid ${Z.cardBorder}`,boxShadow:Z.cardShadow,padding:(null==w?void 0:w.cardInnerPadding)||"20px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",flexShrink:0}},e.default.createElement("div",{style:{width:"100%",flex:1,display:"flex",gap:(null==w?void 0:w.contentGap)||20,alignItems:"stretch"}},e.default.createElement("div",{style:{flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible"}},e.default.createElement(c,{firstPercent:100,secondPercent:$,firstColor:Z.svgWaterColor,secondColor:Z.svgSiltColor,wallColor:Z.svgWallColor,waterDuration:null!==(f=null==w?void 0:w.waterSpeedSec)&&void 0!==f?f:4,siltDuration:null!==(g=null==w?void 0:w.siltSpeedSec)&&void 0!==g?g:12,waterAmp:null!==(h=null==w?void 0:w.waveAmpWater)&&void 0!==h?h:3,mudAmpMax:null!==(p=null==w?void 0:w.waveAmpSilt)&&void 0!==p?p:2,waterLen:null!==(y=null==w?void 0:w.waveLen)&&void 0!==y?y:28,bottomRoundness:null!==(b=null==w?void 0:w.bottomRoundness)&&void 0!==b?b:20,svgWidth:null!==(x=null==w?void 0:w.svgElementWidth)&&void 0!==x?x:300,svgHeight:null!==(S=null==w?void 0:w.svgElementHeight)&&void 0!==S?S:100})),e.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",gap:(null==w?void 0:w.textGap)||8,color:Z.textPrimary,fontSize:(null==w?void 0:w.textFontSize)||13,lineHeight:(null==w?void 0:w.textLineHeight)||1.4}},e.default.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:(null==w?void 0:w.dotGap)||8,marginBottom:(null==w?void 0:w.attributeMarginBottom)||8}},e.default.createElement("div",{style:{color:Z.textPrimary,fontSize:(null==w?void 0:w.titleFontSize)||16,fontWeight:(null==w?void 0:w.titleFontWeight)||"600",marginBottom:(null==w?void 0:w.titleValueMarginBottom)||4}},T,": ",d(H.mainValue),u(k))),e.default.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:(null==w?void 0:w.dotGap)||8,marginBottom:(null==w?void 0:w.attributeMarginBottom)||8}},e.default.createElement("div",{style:{width:(null==w?void 0:w.dotSize)||12,height:(null==w?void 0:w.dotSize)||12,borderRadius:"50%",background:Z.dotWaterColor,flexShrink:0,marginTop:(null==w?void 0:w.dotMarginTop)||2}}),e.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:(null==w?void 0:w.attributeValueGap)||2}},e.default.createElement("div",{style:{color:Z.textSecondary,fontSize:(null==w?void 0:w.attributeLabelFontSize)||12,fontWeight:(null==w?void 0:w.attributeLabelFontWeight)||"normal"}},G,":"),e.default.createElement("div",{style:{color:Z.textPrimary,fontSize:(null==w?void 0:w.attributeValueFontSize)||14,fontWeight:(null==w?void 0:w.attributeValueFontWeight)||"600"}},d(H.firstValue),u(k)," (",Math.round(B),"%)"))),e.default.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:(null==w?void 0:w.dotGap)||8}},e.default.createElement("div",{style:{width:(null==w?void 0:w.dotSize)||12,height:(null==w?void 0:w.dotSize)||12,borderRadius:"50%",background:Z.dotSiltColor,flexShrink:0,marginTop:(null==w?void 0:w.dotMarginTop)||2}}),e.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:(null==w?void 0:w.attributeValueGap)||2}},e.default.createElement("div",{style:{color:Z.textSecondary,fontSize:(null==w?void 0:w.attributeLabelFontSize)||12,fontWeight:(null==w?void 0:w.attributeLabelFontWeight)||"normal"}},O,":"),e.default.createElement("div",{style:{color:Z.textPrimary,fontSize:(null==w?void 0:w.attributeValueFontSize)||14,fontWeight:(null==w?void 0:w.attributeValueFontWeight)||"600"}},d(H.secondValue),u(k)," (",Math.round($),"%)"))))))):null}function m(e){n.p=e}})(),a})())}}}));