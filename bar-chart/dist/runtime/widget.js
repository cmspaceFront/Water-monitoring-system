System.register(["jimu-core/react","jimu-core"],(function(e,o){var t={},r={};return{setters:[function(e){t.default=e.default,t.useEffect=e.useEffect,t.useMemo=e.useMemo,t.useState=e.useState},function(e){r.DataSourceComponent=e.DataSourceComponent}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=r},1315:e=>{"use strict";e.exports=t}},o={};function n(t){var r=o[t];if(void 0!==r)return r.exports;var a=o[t]={exports:{}};return e[t](a,a.exports,n),a.exports}n.d=(e,o)=>{for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},n.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var a={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(a),n.d(a,{__set_webpack_public_path__:()=>b,default:()=>c});var e=n(1315),o=n(8891),t=function(e,o,t,r){return new(t||(t=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(i,s)}l((r=r.apply(e,o||[])).next())}))};function r(e,o){return t(this,arguments,void 0,(function*(e,o,t=["*"],r=4e3){let n=0,a=[];for(;;){const i=yield e.query({where:o,outFields:t,returnGeometry:!1,resultOffset:n,resultRecordCount:r});if(a=a.concat(i.records||[]),!i.records||i.records.length<r)break;n+=r}return a}))}const i={todakol:"Тўдакўл сув омбори",chortoq:"Чортоқ сув омбори ",topalang:"Тўпаланг сув омбори",tosinsoy:"Тўсинсой сув омбори ",toshkent:"Тошкент сув омбори ",talimarjon:"Талимаржон сув омбори",kattakorgon:"Каттақўрғон сув омбори",zarkent:"Заркент сув омбори ",zomin:"Зомин сув омбори ",qorovultepa:"Қоровултепа сув омбори ",oktepa:"Оқтепа сув омбори",jiydalisoy:"Жийдалисой сув омбори",ohangaron:"Оҳангарон сув омбори ",pachkamar:"Пачкамар сув омбори ",karkidon:"Каркидон сув омбори ",jizzakh:"Жиззах сув омбори",hisorak:"Хисорак сув омбори",qorgontepa:"Қўрғонтепа сув омбори ",chorvoq:"Чорвоқ сув омбори ",quyumozor:"Қуйимозор сув омбори ",oqdaryo:"Оқ дарё сув омбори",shurkul:"Шўркўл сув омбори",qorasuv:"Қорасув сув омбори (Наманган)",qorasuvsamarqand:"Қорасув сув омбори",qorasuvnamangan:"Қорасув сув омбори (Наманган)",uchqizil:"Учқизил сув омбори",qorabog:"Қорабоғ сув омбори",nugayli:"Нуғайли сув омбори",yangikurgan:"Янги Қўрғон сув омбори",qamashi:"Қамаши сув омбори",sobirsoy:"Собирсой сув омбори",degrez:"Дегрез сув омбори",eskiyer:"Эскиер сув омбори",girvansoy:"Ғирвонсой сел омбори",oqbilol:"Оқбилол сел омбори",kengkol:"Кенгкўл сув омбори",omondara:"Омондара сел омбори",rezaksoy:"Резаксой сув омбори",qoratepa:"Қоратепа сув омбори",kamongaron:"Камонгарон сув омбори",mominobod:"Мўминобод сел омбори",koksereksoy:"Кўксераксой сув омбори",ertikon:"Ертикон сув омбори",langar:"Лангар сув омбори",fargona:"Марказий Фарғона сув омбори",qarasuv:"Қорасув сув омбори",qalqama:"Қалқама сув  омбори",shorabsoy:"Шўробсой сув омбори",dehqonobod:"Деҳқонобод сув омбори",sentabsoy:"Сентобсой сув омбори",koksaroy:"Кўксарой сув омбори",xojamushkent:"Хўжамушкент сув омбори",oqchobsoy:"Оқчобсой сув омбори",shorsuv:"Шўр сув сел омбори",oqbuloq:"Оқбулоқ сув омбори",qizilsuv:"Қизилсув сув омбори",asaka:"Aсака адир сув омбори",qoramurut:"Қорамурт сув омбори",chimqurgon:"Чимқоргон сув омбори ",surxon:"Жанубий-Сурхон сув омбори ",arnasoy:"Aрнасой сув омбори",varziq:"Варзиқ сув омбори ",shorobsoy:"Шўробсой сув омбори"};const s={};["Arnasoy suv ombori","Asaka adir suv ombori","Chimqo'rg'on suv ombori","Chortoq suv ombori","Chorvoq suv ombori","Degrez suv ombori","Dehqonobod suv ombori","Ertikon suv ombori","Eski yer suv ombori","Girvonsoy suv ombori","Hisorak suv ombori","Janubiy-Surhon suv ombori","Jiydalisoy suv ombori","Jizzax suv ombori","Kamashi suv ombori","Kamongaron suv ombori","Karkidon suv ombori","Kattaqo'rg'on suv ombori","Kengko'l suv ombori","ko'ksaroy suv ombori","Koksereksoy suv ombori","Langar suv ombori","Markaziy Fargona suv ombori","Nugayli suv ombori","Ohangaron suv ombori","Omondora suv ombori","Oqbilol suv ombori","Oqbuloq suv omvori","Oqchobsoy suv ombori","Oqdaryo suv ombori","Oqtepa suv ombori","Pachkamar suv ombori","Qalqama sel ombori","Qizilsuv suv ombori","Qorabog' suv ombori","Qoramurut sel ombori","Qorasuv suv ombori","Qorasuv suv ombori (Namangan)","Qoratepa suv ombori","Qorovultepa suv ombori","Qurgontepa suv ombori","Quyimozor suv ombori","Rezaksoy suv ombori","Sentobsoy suv ombori","Sho'rko'l suv ombori","sho'robsoy sov ombori","Sobirsoy suv ombori","Talimarjon suv ombori","To'dako'l suv ombori","To'palang suv ombori","Toshkent suv ombori","Tusunsoy suv ombori","Uchqizil suv ombori","Varzik suv ombori","Xo'jamushkent suv ombori","Yangi Qo'rg'on suv ombori","Zomin suv ombori"].forEach((e=>{const o=e.toLowerCase().replace(/['''`]/g,"").replace(/\s+/g,"").replace(/[\(\)]/g,"");let t=o.replace(/suvombori.*$/g,"").replace(/selombori.*$/g,"").replace(/sovombori.*$/g,"");t.endsWith("ko")&&(t+="l"),s[t]=e,s[o]=e}));const l="uz";function u(e,o){var t,r;return null===(r=null===(t=null==e?void 0:e.feature)||void 0===t?void 0:t.attributes)||void 0===r?void 0:r[o]}function d(e,o=.15){if(!e)return e;let t=e.replace("#","");3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const r=parseInt(t,16);let n=Math.max(0,(r>>16)-255*o),a=Math.max(0,(r>>8&255)-255*o),i=Math.max(0,(255&r)-255*o);return`#${((1<<24)+(Math.round(n)<<16)+(Math.round(a)<<8)+Math.round(i)).toString(16).slice(1)}`}const m=({themed:o})=>((0,e.useEffect)((()=>{const e="no-data-animation-styles";if(!document.getElementById(e)){const o=document.createElement("style");o.id=e,o.textContent="\n        @keyframes barPulse {\n          0%, 100% { opacity: 0.3; transform: scaleY(0.4); }\n          50% { opacity: 0.7; transform: scaleY(0.8); }\n        }\n        \n        @keyframes barWave {\n          0%, 100% { transform: scaleY(0.3); }\n          50% { transform: scaleY(0.7); }\n        }\n        \n        @keyframes emptyFloat {\n          0%, 100% { transform: translateY(0px); opacity: 0.5; }\n          50% { transform: translateY(-4px); opacity: 0.8; }\n        }\n        \n        @keyframes barSlideIn {\n          0% { \n            transform: scaleY(0) scaleX(0.8);\n            opacity: 0;\n          }\n          100% { \n            transform: scaleY(1) scaleX(1);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes barGrow {\n          0% { \n            transform: scaleX(0);\n            transform-origin: left center;\n          }\n          100% { \n            transform: scaleX(1);\n            transform-origin: left center;\n          }\n        }\n        \n        @keyframes barHoverPulse {\n          0%, 100% { \n            box-shadow: 0 4px 16px 0 rgba(44,100,255,0.18);\n          }\n          50% { \n            box-shadow: 0 8px 24px 0 rgba(44,100,255,0.35);\n          }\n        }\n        \n        @keyframes barHoverGlow {\n          0%, 100% { \n            filter: brightness(1);\n          }\n          50% { \n            filter: brightness(1.15);\n          }\n        }\n        \n        @keyframes legendHover {\n          0%, 100% { \n            transform: scale(1);\n          }\n          50% { \n            transform: scale(1.1);\n          }\n        }\n        \n        @keyframes barShine {\n          0% { \n            background-position: -200% center;\n          }\n          100% { \n            background-position: 200% center;\n          }\n        }\n      ",document.head.appendChild(o)}}),[]),e.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"90px",width:"100%",opacity:.6}},e.default.createElement("div",{style:{display:"flex",alignItems:"end",justifyContent:"center",gap:"8px",height:"60px",marginBottom:"20px"}},[35,50,25,45,30].map(((t,r)=>e.default.createElement("div",{key:r,style:{width:"12px",height:`${t}px`,backgroundColor:o.titleColor||"#ccc",borderRadius:"6px",opacity:.3,animation:"barWave 2s ease-in-out infinite",animationDelay:.2*r+"s"}}))))));function c(t){var n,a;const{config:s,useDataSources:c,id:b}=t,[f,g]=(0,e.useState)(localStorage.getItem("custom_locale")||l);(0,e.useEffect)((()=>{const e=e=>g(e.detail);return window.addEventListener("custom-locale-changed",e),()=>window.removeEventListener("custom-locale-changed",e)}),[]);const[v,p]=(0,e.useState)(localStorage.getItem("customTheme")||"light");(0,e.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("customTheme")||"light";p(e)};window.addEventListener("storage",e),window.addEventListener("theme-changed",e);const o=setInterval(e,0);return()=>{window.removeEventListener("storage",e),window.removeEventListener("theme-changed",e),clearInterval(o)}}),[]);const h="dark"===v,y={bgColor:h?s.bgColorDark||s.bgColor||"#232324":s.bgColor||"#fff",titleColor:h?s.titleColorDark||s.titleColor||"#fff":s.titleColor||"#444",legendColor:h?s.legendColorDark||s.legendColor||"#eee":s.legendColor||"#333",percentTextColor:h?s.percentTextColorDark||s.percentTextColor||"#fff":s.percentTextColor||"#333",barLabelTextColor:h?s.barLabelTextColorDark||s.barLabelTextColor||"#fff":s.barLabelTextColor||"#333",barBorderColor:h?s.barBorderColorDark||s.barBorderColor||"#232324":s.barBorderColor||"#fff"},[x,k]=(0,e.useState)([]),[w,S]=(0,e.useState)(null),C=(0,e.useMemo)((()=>function(e){if(!e)return[];const o=e.bars;return Array.isArray(o)?o.filter((e=>e&&"string"==typeof e.field&&e.field.length>0)):[]}(s)),[s]),[E,q]=(0,e.useState)(null),[z,L]=(0,e.useState)((t.selectedDam||localStorage.getItem("selected_dam")||"").trim());(0,e.useEffect)((()=>{function e(e){"selected_dam"===e.key&&L((t.selectedDam||e.newValue||"").trim())}function o(){const e=localStorage.getItem("selected_dam")||"";L((t.selectedDam||e||"").trim())}let r=localStorage.getItem("selected_dam")||"";const n=setInterval((()=>{const e=localStorage.getItem("selected_dam")||"";e!==r&&(r=e,L((t.selectedDam||e||"").trim()))}),100);return window.addEventListener("storage",e),window.addEventListener("dam_name_changed",o),window.addEventListener("selected_dam_changed",o),window.addEventListener("dam_selected",o),()=>{window.removeEventListener("storage",e),window.removeEventListener("dam_name_changed",o),window.removeEventListener("selected_dam_changed",o),window.removeEventListener("dam_selected",o),clearInterval(n)}}),[t.selectedDam]),(0,e.useEffect)((()=>{L((t.selectedDam||localStorage.getItem("selected_dam")||"").trim())}),[t.selectedDam]);const I=i[z]||z,_=s.damFilterField||"Nomi",$=z&&I?`${_} = '${I}'`:"1=1";(0,e.useEffect)((()=>{if(!w||0===C.length||!z)return;if(!$||"1=1"===$)return;const e=Array.from(new Set([...C.map((e=>e.field)),...C.map((e=>e.attributeField)).filter(Boolean),s.titleAttribute].filter(Boolean)));performance.now(),r(w,$,e).then((e=>{performance.now(),k(e)}))}),[w,C,z,s.titleAttribute,$]),(0,e.useEffect)((()=>{w&&r(w,"1=1",[_]).then((e=>{}))}),[w,_]);const{barSums:D,sumTotal:T}=(0,e.useMemo)((()=>{const e=C.map((e=>{var o;let t=0;for(const r of x)t+=Number(null!==(o=u(r,e.field))&&void 0!==o?o:0);return t})),o=e.reduce(((e,o)=>e+o),0);return{barSums:e,sumTotal:o}}),[x,C]),B=(0,e.useMemo)((()=>T?D.map((e=>Math.round(e/T*100))):C.map((()=>0))),[D,T,C]);if(!z)return null;function F(e){var o;return null!==(o=null==e?void 0:e.toLocaleString("ru-RU").replace(/,/g," "))&&void 0!==o?o:"—"}function R(){return"uz"===f?"m³":"м³"}function j(e){var o,t,r,n,a,i,l,u;const d=null!==(t=null!==(o=e.borderRadiusTopLeft)&&void 0!==o?o:s.barBorderRadius)&&void 0!==t?t:18,m=null!==(n=null!==(r=e.borderRadiusTopRight)&&void 0!==r?r:s.barBorderRadius)&&void 0!==n?n:18,c=null!==(i=null!==(a=e.borderRadiusBottomRight)&&void 0!==a?a:s.barBorderRadius)&&void 0!==i?i:18,b=null!==(u=null!==(l=e.borderRadiusBottomLeft)&&void 0!==l?l:s.barBorderRadius)&&void 0!==u?u:18;return d===m&&m===c&&c===b?`${d}px`:`${d}px ${m}px ${c}px ${b}px`}const M=s[`title_${f}`]||"";let O="";if(s.titleAttribute&&x.length>0){const e=u(x[0],s.titleAttribute);O=null!=e?String(e):""}const A=Object.assign(Object.assign({fontSize:s.titleFontSize||17,fontWeight:600,color:y.titleColor,fontFamily:s.titleFontFamily||"inherit"},"left"===(W=s.titlePosition||"center")?{textAlign:"left"}:"right"===W?{textAlign:"right"}:{textAlign:"center"}),{marginBottom:8,marginTop:10,animation:x.length>0?"barSlideIn 0.6s ease-out both":"none"});var W;function Q(e,o){return e.color||["#299AFF","#FFD247","#FF6B6B","#6BCB77","#4D96FF"][o%5]}function Y(e){if(e.attributeField&&x.length>0){const o=u(x[0],e.attributeField);return null!=o?String(o):""}return""}return e.default.createElement("div",{style:{width:"100%",height:"100%",background:y.bgColor,borderRadius:null!==(n=s.borderRadius)&&void 0!==n?n:16,padding:"8px 18px 0px 18px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center"}},e.default.createElement(o.DataSourceComponent,{useDataSource:null==c?void 0:c[0],widgetId:b,onDataSourceCreated:e=>S(e)}),e.default.createElement("div",{style:A},M,O&&e.default.createElement("span",{style:{fontWeight:700,marginLeft:7}},isFinite(Number(O))?F(Number(O)):O,R())),0===x.length&&e.default.createElement("div",{style:{animation:"barSlideIn 0.8s ease-out 0.3s both"}},e.default.createElement(m,{themed:y})),x.length>0&&e.default.createElement("div",{style:{width:"100%",minHeight:40,background:y.bgColor,borderRadius:`${null!==(a=s.barBorderRadius)&&void 0!==a?a:18}px`,overflow:"visible",marginBottom:10,display:"flex",alignItems:"flex-end",position:"relative",flex:1,maxHeight:"100%",animation:"barSlideIn 0.8s ease-out 0.2s both"}},C.map(((o,t)=>{var r;const n=E===t;return e.default.createElement("div",{key:t,style:{height:"100%",width:`${B[t]}%`,background:n?`linear-gradient(90deg, \n                        ${d(Q(o,t),.12)} 0%, \n                        ${Q(o,t)} 50%, \n                        ${d(Q(o,t),.12)} 100%),\n                        linear-gradient(45deg, \n                        transparent 40%, \n                        rgba(255,255,255,0.2) 50%, \n                        transparent 60%)`:Q(o,t),backgroundSize:n?"200% 100%, 200% 100%":"100% 100%",borderRadius:j(o),marginLeft:0===t?0:null!==(r=s.barMargin)&&void 0!==r?r:10,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",animation:`barGrow 1.2s ease-out ${.15*t}s both${n?", barHoverGlow 1s ease-in-out infinite":""}`,display:"flex",alignItems:"center",justifyContent:"center",color:y.percentTextColor,fontWeight:600,fontSize:17,border:`${s.barBorderWidth||0}px solid ${y.barBorderColor}`,position:"relative",zIndex:n?1e4:9999,minWidth:0,maxWidth:"100%",boxShadow:n?"0 8px 32px 0 rgba(44,100,255,0.3), 0 0 20px 0 rgba(44,100,255,0.2)":"0 2px 12px 0 rgba(44,100,255,0.10)",transform:n?"scale(1.05) translateY(-2px)":"scale(1)",cursor:"pointer",overflow:"hidden"},onMouseEnter:()=>q(t),onMouseLeave:()=>q(null)},n&&e.default.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%)",backgroundSize:"200% 200%",animation:"barShine 1.5s ease-in-out infinite",borderRadius:j(o),pointerEvents:"none"}}),B[t]>0&&e.default.createElement("span",{style:{transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",transform:n?"scale(1.1)":"scale(1)",textShadow:n?"0 0 10px rgba(255,255,255,0.5)":"none",zIndex:1,position:"absolute",top:0,left:0,right:0,bottom:0}},B[t]>=5?`${B[t]}%`:""))}))),x.length>0&&e.default.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:15,marginBottom:10,flexWrap:"wrap",gap:4,color:y.barLabelTextColor,animation:"barSlideIn 0.8s ease-out 0.6s both"}},C.map(((o,t)=>e.default.createElement("div",{key:t,style:{display:"flex",alignItems:"center",gap:4,animation:`barSlideIn 0.6s ease-out ${.8+.1*t}s both`}},e.default.createElement("span",{style:{width:13,height:13,marginBottom:2,borderRadius:"50%",background:E===t?`radial-gradient(circle, ${Q(o,t)}, ${d(Q(o,t),.2)})`:Q(o,t),display:"inline-block",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:E===t?"scale(1.3)":"scale(1)",boxShadow:E===t?`0 0 15px ${Q(o,t)}40, 0 0 30px ${Q(o,t)}20`:"none",animation:E===t?"legendHover 0.6s ease-in-out infinite":"none"},onMouseEnter:()=>q(t),onMouseLeave:()=>q(null)}),e.default.createElement("span",{style:{color:y.barLabelTextColor,transition:"all 0.3s ease",transform:E===t?"translateX(4px)":"translateX(0)",fontWeight:E===t?700:400}},function(e){return e[`label_${f}`]||e.label_ru||e.label_uz||e.label_uzcryl||e.field}(o),Y(o)&&e.default.createElement("span",{style:{fontWeight:700,marginLeft:4}},Y(o)),e.default.createElement("span",{style:{fontWeight:700,marginLeft:4,color:E===t?Q(o,t):y.barLabelTextColor,transition:"color 0.3s ease"}},F(D[t]),R()," ",e.default.createElement("span",{style:{fontWeight:400,marginLeft:4}},"(",B[t],"%)"))))))))}function b(e){n.p=e}})(),a})())}}}));