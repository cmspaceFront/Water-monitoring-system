/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-core/react","jimu-core/react-dom","jimu-ui"],(function(o,e){var n={},t={},r={},i={};return{setters:[function(o){n.getAppStore=o.getAppStore,n.jsx=o.jsx},function(o){t.createElement=o.createElement,t.forwardRef=o.forwardRef,t.useEffect=o.useEffect,t.useRef=o.useRef,t.useState=o.useState},function(o){r.default=o.default},function(o){i.Button=o.Button}],execute:function(){o((()=>{var o={38799:(o,e,n)=>{"use strict";n.d(e,{Z:()=>l});var t=n(8081),r=n.n(t),i=n(23645),d=n.n(i)()(r());d.push([o.id,".language-widget{font-family:sans-serif;position:relative}.lang-btn{border:none;cursor:pointer;text-align:center;display:flex;align-items:center;height:auto;white-space:nowrap;overflow:visible}.arrow{font-size:12px}.dropdown{position:absolute;background-color:#fff;z-index:9999;box-shadow:0 2px 6px rgba(0,0,0,.15);overflow:hidden;display:flex;flex-direction:column}.dropdown-item{cursor:pointer;transition:all .2s ease;margin:0;border:none}",""]);const l=d},23645:o=>{"use strict";o.exports=function(o){var e=[];return e.toString=function(){return this.map((function(e){var n="",t=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),t&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=o(e),t&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(o,n,t,r,i){"string"==typeof o&&(o=[[null,o,void 0]]);var d={};if(t)for(var l=0;l<this.length;l++){var a=this[l][0];null!=a&&(d[a]=!0)}for(var c=0;c<o.length;c++){var s=[].concat(o[c]);t&&d[s[0]]||(void 0!==i&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=i),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),r&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=r):s[4]="".concat(r)),e.push(s))}},e}},8081:o=>{"use strict";o.exports=function(o){return o[1]}},93379:o=>{"use strict";var e=[];function n(o){for(var n=-1,t=0;t<e.length;t++)if(e[t].identifier===o){n=t;break}return n}function t(o,t){for(var i={},d=[],l=0;l<o.length;l++){var a=o[l],c=t.base?a[0]+t.base:a[0],s=i[c]||0,u="".concat(c," ").concat(s);i[c]=s+1;var v=n(u),f={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==v)e[v].references++,e[v].updater(f);else{var g=r(f,t);t.byIndex=l,e.splice(l,0,{identifier:u,updater:g,references:1})}d.push(u)}return d}function r(o,e){var n=e.domAPI(e);return n.update(o),function(e){if(e){if(e.css===o.css&&e.media===o.media&&e.sourceMap===o.sourceMap&&e.supports===o.supports&&e.layer===o.layer)return;n.update(o=e)}else n.remove()}}o.exports=function(o,r){var i=t(o=o||[],r=r||{});return function(o){o=o||[];for(var d=0;d<i.length;d++){var l=n(i[d]);e[l].references--}for(var a=t(o,r),c=0;c<i.length;c++){var s=n(i[c]);0===e[s].references&&(e[s].updater(),e.splice(s,1))}i=a}}},90569:o=>{"use strict";var e={};o.exports=function(o,n){var t=function(o){if(void 0===e[o]){var n=document.querySelector(o);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(o){n=null}e[o]=n}return e[o]}(o);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(n)}},19216:o=>{"use strict";o.exports=function(o){var e=document.createElement("style");return o.setAttributes(e,o.attributes),o.insert(e,o.options),e}},3565:(o,e,n)=>{"use strict";o.exports=function(o){var e=n.nc;e&&o.setAttribute("nonce",e)}},7795:o=>{"use strict";o.exports=function(o){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=o.insertStyleElement(o);return{update:function(n){!function(o,e,n){var t="";n.supports&&(t+="@supports (".concat(n.supports,") {")),n.media&&(t+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(t+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),t+=n.css,r&&(t+="}"),n.media&&(t+="}"),n.supports&&(t+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(t,o,e.options)}(e,o,n)},remove:function(){!function(o){if(null===o.parentNode)return!1;o.parentNode.removeChild(o)}(e)}}}},44589:o=>{"use strict";o.exports=function(o,e){if(e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}},48891:o=>{"use strict";o.exports=n},51315:o=>{"use strict";o.exports=t},20800:o=>{"use strict";o.exports=r},30726:o=>{"use strict";o.exports=i}},e={};function d(n){var t=e[n];if(void 0!==t)return t.exports;var r=e[n]={id:n,exports:{}};return o[n](r,r.exports,d),r.exports}d.n=o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return d.d(e,{a:e}),e},d.d=(o,e)=>{for(var n in e)d.o(e,n)&&!d.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:e[n]})},d.o=(o,e)=>Object.prototype.hasOwnProperty.call(o,e),d.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},d.p="",d.nc=void 0;var l={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(l),d.d(l,{__set_webpack_public_path__:()=>O,default:()=>H});var o=d(48891),e=d(51315),n=d(20800);const t=o=>{const e=(o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,((o,e,n)=>n?n.toUpperCase():e.toLowerCase())))(o);return e.charAt(0).toUpperCase()+e.slice(1)},r=(...o)=>o.filter(((o,e,n)=>Boolean(o)&&""!==o.trim()&&n.indexOf(o)===e)).join(" ").trim(),i=o=>{for(const e in o)if(e.startsWith("aria-")||"role"===e||"title"===e)return!0};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=(0,e.forwardRef)((({color:o="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:d,className:l="",children:c,iconNode:s,...u},v)=>(0,e.createElement)("svg",{ref:v,...a,width:n,height:n,stroke:o,strokeWidth:d?24*Number(t)/Number(n):t,className:r("lucide",l),...!c&&!i(u)&&{"aria-hidden":"true"},...u},[...s.map((([o,n])=>(0,e.createElement)(o,n))),...Array.isArray(c)?c:[c]]))),s=(o,n)=>{const i=(0,e.forwardRef)((({className:i,...d},l)=>{return(0,e.createElement)(c,{ref:l,iconNode:n,className:r(`lucide-${a=t(o),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${o}`,i),...d});var a}));return i.displayName=t(o),i},u=s("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),v=s("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),f={Promise:"undefined"!=typeof window?window.Promise:void 0};var g="4.25",p="next";function m(o){if(o.toLowerCase()===p)return p;var e=o&&o.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function h(o){return void 0===o&&(o=g),"https://js.arcgis.com/".concat(o,"/")}function w(o,e){var n=function(o){return!o||m(o)?function(o){void 0===o&&(o=g);var e=h(o),n=m(o);if(n!==p&&3===n.major){var t=n.minor<=10?"js/":"";return"".concat(e).concat(t,"esri/css/esri.css")}return"".concat(e,"esri/themes/light/main.css")}(o):o}(o),t=function(o){return document.querySelector('link[href*="'.concat(o,'"]'))}(n);return t||function(o,e){if(e){var n=document.querySelector(e);n.parentNode.insertBefore(o,n)}else document.head.appendChild(o)}(t=function(o){var e=document.createElement("link");return e.rel="stylesheet",e.href=o,e}(n),e),t}var b={};function y(o,e,n){var t;n&&(t=function(o,e){var n=function(t){e(t.error||new Error("There was an error attempting to load ".concat(o.src))),o.removeEventListener("error",n,!1)};return o.addEventListener("error",n,!1),n}(o,n));var r=function(){e(o),o.removeEventListener("load",r,!1),t&&o.removeEventListener("error",t,!1)};o.addEventListener("load",r,!1)}function x(){return document.querySelector("script[data-esri-loader]")}function C(){var o=window.require;return o&&o.on}function k(o){return new f.Promise((function(e,n){var t=window.require.on("error",n);window.require(o,(function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];t.remove(),e(o)}))}))}var T=d(30726),S=d(93379),I=d.n(S),E=d(7795),j=d.n(E),z=d(90569),L=d.n(z),N=d(3565),R=d.n(N),_=d(19216),P=d.n(_),$=d(44589),A=d.n($),B=d(38799),M={};M.styleTagTransform=A(),M.setAttributes=R(),M.insert=L().bind(null,"head"),M.domAPI=j(),M.insertStyleElement=P(),I()(B.Z,M),B.Z&&B.Z.locals&&B.Z.locals;const W={uz:{_widgetLabel:"Sinov vidjeti",description:"Tilni o‘zgartirganda bu matn o‘zgaradi.",logout:"Chiqish"},uzcryl:{_widgetLabel:"Синов виджети",description:"Тилни ўзгартирганда бу матн ўзгаради.",logout:"Чиқиш"},ru:{_widgetLabel:"Тестовый виджет",description:"Этот текст изменится при переключении языка.",logout:"Выйти"}};var F=function(o,e,n,t){return new(n||(n=Promise))((function(r,i){function d(o){try{a(t.next(o))}catch(o){i(o)}}function l(o){try{a(t.throw(o))}catch(o){i(o)}}function a(o){var e;o.done?r(o.value):(e=o.value,e instanceof n?e:new n((function(o){o(e)}))).then(d,l)}a((t=t.apply(o,e||[])).next())}))};const H=t=>{var r,i,d,l,a,c,s,g,p,m,S,I,E,j,z,L,N,R,_,P,$,A,B,M,H,O,U,D,q,Z,G,J,V,X,Y,K,Q,oo,eo,no,to,ro,io,lo,ao,co,so,uo,vo,fo,go,po,mo,ho,wo,bo,yo,xo,Co,ko,To,So,Io,Eo,jo,zo,Lo,No;const Ro=localStorage.getItem("custom_locale")||"uz",[_o,Po]=(0,e.useState)(Ro),[$o,Ao]=(0,e.useState)(!1),[Bo,Mo]=(0,e.useState)(!1),[Wo,Fo]=(0,e.useState)({top:0,left:0,width:0}),[Ho,Oo]=(0,e.useState)({bg:"",color:""}),[Uo,Do]=(0,e.useState)(0),[qo,Zo]=(0,e.useState)(localStorage.getItem("customTheme")||"light");(0,e.useEffect)((()=>{const o=()=>Zo(localStorage.getItem("customTheme")||"light");window.addEventListener("storage",o),window.addEventListener("custom-theme-changed",o);const e=setInterval((()=>{const o=localStorage.getItem("customTheme")||"light";o!==qo&&Zo(o)}),100);return()=>{window.removeEventListener("storage",o),window.removeEventListener("custom-theme-changed",o),clearInterval(e)}}),[qo]);const Go=(0,e.useRef)(null),Jo=W[_o];(0,e.useEffect)((()=>{localStorage.setItem("custom_locale",_o),window.dispatchEvent(new CustomEvent("custom-locale-changed",{detail:_o}))}),[_o]),(0,e.useEffect)((()=>{const o=o=>{const e=o.detail||localStorage.getItem("custom_locale")||"uz";Po(e)};return window.addEventListener("custom-locale-changed",o),()=>window.removeEventListener("custom-locale-changed",o)}),[]),(0,e.useEffect)((()=>{const o=o=>{if($o&&Go.current&&!Go.current.contains(o.target)){const e=document.querySelector(".dropdown");e&&!e.contains(o.target)&&Ao(!1)}},e=o=>{"Escape"===o.key&&$o&&Ao(!1)},n=()=>{$o&&Ao(!1)};return $o&&(document.addEventListener("mousedown",o),document.addEventListener("keydown",e),window.addEventListener("scroll",n),window.addEventListener("resize",n)),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("keydown",e),window.removeEventListener("scroll",n),window.removeEventListener("resize",n)}}),[$o]);const Vo=()=>{var e,n;const t=(0,o.getAppStore)().getState(),r=null===(e=null==t?void 0:t.user)||void 0===e?void 0:e.firstName,i=null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.lastName;return r||i?{firstName:r,lastName:i}:null},[Xo,Yo]=(0,e.useState)(""),[Ko,Qo]=(0,e.useState)("");(0,e.useEffect)((()=>{const o=Vo();o&&(Yo(o.firstName),Qo(o.lastName))}),[]);const oe=(null===(r=t.config)||void 0===r?void 0:r.variant)||"default",ee=(null===(l=null===(d=null===(i=t.config)||void 0===i?void 0:i.styleConfig)||void 0===d?void 0:d.themeStyle)||void 0===l?void 0:l.quickStyleType)||"default",ne=!1!==(null===(c=null===(a=t.config)||void 0===a?void 0:a.styleConfig)||void 0===c?void 0:c.useCustom)?oe:ee,te="default"!==ne,re=(null===(s=t.config)||void 0===s?void 0:s.displayMode)||"full",ie=(()=>{var o,e,n,r,i,d,l,a;return"dark"===qo&&(null===(o=t.config)||void 0===o?void 0:o.enableDarkTheme)&&(null===(e=t.config)||void 0===e?void 0:e.darkTheme)?{bgColor:t.config.darkTheme.bgColor||"#2d2d2d",textColor:t.config.darkTheme.textColor||"#ffffff",hoverBgColor:t.config.darkTheme.hoverBgColor||"#404040",hoverTextColor:t.config.darkTheme.hoverTextColor||"#ffffff",borderColor:t.config.darkTheme.borderColor||"#555555",hoverBorderColor:t.config.darkTheme.hoverBorderColor||"#777777"}:{bgColor:(null===(n=t.config)||void 0===n?void 0:n.bgColor)||"#ffffff",textColor:(null===(r=t.config)||void 0===r?void 0:r.textColor)||"#000000",hoverBgColor:(null===(i=t.config)||void 0===i?void 0:i.hoverBgColor)||"#f0f0f0",hoverTextColor:(null===(d=t.config)||void 0===d?void 0:d.hoverTextColor)||"#000000",borderColor:(null===(l=t.config)||void 0===l?void 0:l.borderColor)||"#cccccc",hoverBorderColor:(null===(a=t.config)||void 0===a?void 0:a.hoverBorderColor)||"#999999"}})();(0,e.useEffect)((()=>{if(Go.current&&te){const o=getComputedStyle(Go.current);Oo({bg:o.backgroundColor,color:o.color})}}),[ne,qo]),(0,e.useEffect)((()=>{const o=Go.current;if(!o)return;const e=new ResizeObserver((o=>{for(const e of o)Do(e.contentRect.width)}));return e.observe(o),()=>e.disconnect()}),[]);const de=()=>{var o;const e=null===(o=t.config)||void 0===o?void 0:o.portalBaseUrl;return e&&e.trim().length>0?e.replace(/\/+$/,""):"https://gis.uzspace.uz/uzspace"},le=()=>{var o;const e=null===(o=t.config)||void 0===o?void 0:o.portalClientId;return e&&e.trim().length>0?e.trim():"arcgisonline"},ae={borderRadius:(null===(g=t.config)||void 0===g?void 0:g.buttonBorderRadius)||(null===(p=t.config)||void 0===p?void 0:p.borderRadius)||"0px",borderWidth:(null===(m=t.config)||void 0===m?void 0:m.borderWidth)||0,borderStyle:(null===(S=t.config)||void 0===S?void 0:S.borderStyle)||"",borderColor:(null===(I=t.config)||void 0===I?void 0:I.borderColor)||"",padding:(null===(E=t.config)||void 0===E?void 0:E.padding)||"",fontSize:(null===(j=t.config)||void 0===j?void 0:j.fontSize)||"14px",width:(null===(z=t.config)||void 0===z?void 0:z.width)||"fit-content",minWidth:(null===(L=t.config)||void 0===L?void 0:L.minWidth)||"fit-content",height:(null===(N=t.config)||void 0===N?void 0:N.height)||"100%",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},ce=te?ae:Object.assign(Object.assign({},ae),{backgroundColor:ie.bgColor,color:ie.textColor,borderColor:ie.borderColor}),se=Bo?{backgroundColor:ie.hoverBgColor,color:ie.hoverTextColor,borderColor:ie.hoverBorderColor}:{},ue=Object.assign(Object.assign({},ce),se),ve="full"===re||"label"===re||"auto"===re&&Uo>100,fe="full"===re||"auto"===re&&Uo>60,ge=()=>{var o,e,n,r;return"dark"===qo&&(null===(o=t.config)||void 0===o?void 0:o.enableDarkTheme)&&(null===(n=null===(e=t.config)||void 0===e?void 0:e.darkTheme)||void 0===n?void 0:n.logoutIconColor)?t.config.darkTheme.logoutIconColor:(null===(r=t.config)||void 0===r?void 0:r.logoutIconColor)?t.config.logoutIconColor:te?Ho.color:ie.textColor},pe=(e,n,t)=>{if(!(null==e?void 0:e.svg))return null;let r=e.svg;/fill=/.test(r.split(">")[0])||(r=r.replace("<svg",'<svg fill="currentColor"')),r=r.replace(/fill="[^"]*"/g,'fill="currentColor"');const i=n;return(0,o.jsx)("div",{id:t,dangerouslySetInnerHTML:{__html:r},style:{width:"16px",height:"16px",color:i,display:"inline-block",flexShrink:0,verticalAlign:"middle",marginRight:"8px"}})},me=$o&&(0,o.jsx)("div",{className:"dropdown",style:{top:Wo.top,left:Wo.left,width:"auto",minWidth:Wo.width,position:"absolute",zIndex:9999,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",backgroundColor:te?Ho.bg:ie.bgColor,border:(null===(R=t.config)||void 0===R?void 0:R.borderWidth)&&parseInt(t.config.borderWidth)>0?`${t.config.borderWidth} solid ${ie.borderColor}`:"none",borderRadius:(null===(_=t.config)||void 0===_?void 0:_.dropdownBorderRadius)||(null===(P=t.config)||void 0===P?void 0:P.borderRadius)||"0px",marginTop:(null===($=t.config)||void 0===$?void 0:$.dropdownMarginTop)||"3px",marginLeft:"dark"===qo&&(null===(A=t.config)||void 0===A?void 0:A.enableDarkTheme)&&(null===(M=null===(B=t.config)||void 0===B?void 0:B.darkTheme)||void 0===M?void 0:M.dropdownMarginLeft)?t.config.darkTheme.dropdownMarginLeft:(null===(H=t.config)||void 0===H?void 0:H.dropdownMarginLeft)||"0px",marginRight:"dark"===qo&&(null===(O=t.config)||void 0===O?void 0:O.enableDarkTheme)&&(null===(D=null===(U=t.config)||void 0===U?void 0:U.darkTheme)||void 0===D?void 0:D.dropdownMarginRight)?t.config.darkTheme.dropdownMarginRight:(null===(q=t.config)||void 0===q?void 0:q.dropdownMarginRight)||"0px",transform:"translateX(-100%)"}},(0,o.jsx)("div",{className:"dropdown-item",style:{backgroundColor:te?Ho.bg:ie.bgColor,color:te?Ho.color:ie.textColor,padding:"dark"===qo&&(null===(Z=t.config)||void 0===Z?void 0:Z.enableDarkTheme)&&(null===(J=null===(G=t.config)||void 0===G?void 0:G.darkTheme)||void 0===J?void 0:J.dropdownItemSpacing)?`${parseInt(t.config.darkTheme.dropdownItemPaddingVertical)||6}px ${parseInt(t.config.darkTheme.dropdownItemPaddingHorizontal)||5}px`:`${parseInt(null===(V=t.config)||void 0===V?void 0:V.dropdownItemPaddingVertical)||6}px ${parseInt(null===(X=t.config)||void 0===X?void 0:X.dropdownItemPaddingHorizontal)||5}px`,fontSize:"dark"===qo&&(null===(Y=t.config)||void 0===Y?void 0:Y.enableDarkTheme)&&(null===(Q=null===(K=t.config)||void 0===K?void 0:K.darkTheme)||void 0===Q?void 0:Q.dropdownFontSize)?t.config.darkTheme.dropdownFontSize:(null===(oo=t.config)||void 0===oo?void 0:oo.dropdownFontSize)||"14px",fontWeight:"dark"===qo&&(null===(eo=t.config)||void 0===eo?void 0:eo.enableDarkTheme)&&(null===(to=null===(no=t.config)||void 0===no?void 0:no.darkTheme)||void 0===to?void 0:to.dropdownFontWeight)?t.config.darkTheme.dropdownFontWeight:(null===(ro=t.config)||void 0===ro?void 0:ro.dropdownFontWeight)||"normal",fontFamily:(null===(io=t.config)||void 0===io?void 0:io.dropdownFontFamily)||"inherit",lineHeight:(null===(lo=t.config)||void 0===lo?void 0:lo.dropdownLineHeight)||"1.2",display:"flex",alignItems:"center",borderBottom:"1px solid rgba(0,0,0,0.1)",whiteSpace:"nowrap"}},pe(null===(ao=t.config)||void 0===ao?void 0:ao.userIcon,(()=>{var o,e,n,r;return"dark"===qo&&(null===(o=t.config)||void 0===o?void 0:o.enableDarkTheme)&&(null===(n=null===(e=t.config)||void 0===e?void 0:e.darkTheme)||void 0===n?void 0:n.userIconColor)?t.config.darkTheme.userIconColor:(null===(r=t.config)||void 0===r?void 0:r.userIconColor)?t.config.userIconColor:te?Ho.color:ie.textColor})()),(0,o.jsx)("span",null,Xo&&Ko?`${Xo} ${Ko}`:"Пользователь")),(0,o.jsx)("div",{className:"dropdown-item",onClick:()=>F(void 0,void 0,void 0,(function*(){var o;let e=null===(o=t.config)||void 0===o?void 0:o.logoutRedirectUrl;(!e||"string"==typeof e&&""===e.trim())&&(e="https://siltation.sgm.uzspace.uz/");const n=e;let r=null;try{[r]=yield function(o,e){if(void 0===e&&(e={}),C())return k(o);var n=x(),t=n&&n.getAttribute("src");return!e.url&&t&&(e.url=t),function(o){void 0===o&&(o={});var e={};[b,o].forEach((function(o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}));var n=e.version,t=e.url||h(n);return new f.Promise((function(o,r){var i=x();if(i){var d=i.getAttribute("src");d!==t?r(new Error("The ArcGIS API for JavaScript is already loaded (".concat(d,")."))):C()?o(i):y(i,o,r)}else if(C())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=e.css;l&&w(!0===l?n:l,e.insertCssBefore),i=function(o){var e=document.createElement("script");return e.type="text/javascript",e.src=o,e.setAttribute("data-esri-loader","loading"),e}(t),y(i,(function(){i.setAttribute("data-esri-loader","loaded"),o(i)}),r),document.body.appendChild(i)}}))}(e).then((function(){return k(o)}))}(["esri/identity/IdentityManager"])}catch(o){r=null}if(r){yield(i=r,F(void 0,void 0,void 0,(function*(){var o,e,n;const t=de(),r=`${t}/sharing/rest/oauth2/revokeToken`;try{const d=le(),l=(null===(o=null==i?void 0:i.credentials)||void 0===o?void 0:o.find((o=>{var e,n;return(null===(e=null==o?void 0:o.server)||void 0===e?void 0:e.startsWith(t))||(null===(n=null==o?void 0:o.portalUrl)||void 0===n?void 0:n.startsWith(t))})))||(null===(e=null==i?void 0:i.credentials)||void 0===e?void 0:e[0]),a=(null==l?void 0:l.refreshToken)||(null==l?void 0:l.token),c=(null===(n=null==l?void 0:l.oAuthInfo)||void 0===n?void 0:n.appId)||(null==l?void 0:l.appId)||d;if(!a)return;const s=new URLSearchParams({f:"json",auth_token:a,client_id:c,token_type_hint:"refresh_token"});yield fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s,credentials:"include"})}catch(o){}})));try{r.destroyCredentials()}catch(o){}}var i;if(yield(o=>{const e=`${de()}/sharing/rest/oauth2/signout?${new URLSearchParams({client_id:le(),redirect_uri:o}).toString()}`;return new Promise((o=>{if("undefined"==typeof document||!document.body)return(()=>{try{fetch(e,{method:"GET",mode:"no-cors",credentials:"include"}).catch((()=>{}))}catch(o){}})(),void o();const n=document.createElement("iframe");n.style.display="none",n.src=e;const t=()=>{n.parentNode&&n.parentNode.removeChild(n),o()},r=window.setTimeout((()=>{t()}),2e3);n.addEventListener("load",(()=>{window.clearTimeout(r),t()})),document.body.appendChild(n)}))})(n),(()=>{const o="Thu, 01 Jan 1970 00:00:00 GMT",e=(()=>{const o=new Set,e=(()=>{try{return new URL(de()).hostname}catch(o){return null}})(),n=window.location.hostname,t=e=>{if(!e)return;o.add(e),o.add(`.${e}`);const n=e.split(".");n.length>2&&o.add(`.${n.slice(n.length-2).join(".")}`)};return t(e),t(n),Array.from(o)})();document.cookie.split(";").forEach((n=>{const[t]=n.trim().split("=");t&&(document.cookie=`${t}=;expires=${o};path=/`,e.forEach((e=>{document.cookie=`${t}=;expires=${o};path=/;domain=${e}`})))}))})(),sessionStorage.clear(),localStorage.clear(),window.top&&window.top!==window)try{window.top.location.href=n}catch(o){window.location.href=n}else window.location.href=n})),onMouseEnter:o=>{var e,n,r,i,d,l,a,c;const s="dark"===qo&&(null===(e=t.config)||void 0===e?void 0:e.enableDarkTheme)&&(null===(r=null===(n=t.config)||void 0===n?void 0:n.darkTheme)||void 0===r?void 0:r.dropdownHoverBgColor)?t.config.darkTheme.dropdownHoverBgColor:(null===(i=t.config)||void 0===i?void 0:i.dropdownHoverBgColor)||ie.hoverBgColor,u="dark"===qo&&(null===(d=t.config)||void 0===d?void 0:d.enableDarkTheme)&&(null===(a=null===(l=t.config)||void 0===l?void 0:l.darkTheme)||void 0===a?void 0:a.dropdownHoverTextColor)?t.config.darkTheme.dropdownHoverTextColor:(null===(c=t.config)||void 0===c?void 0:c.dropdownHoverTextColor)||ie.hoverTextColor;o.currentTarget.style.backgroundColor=s,o.currentTarget.style.color=u;const v=o.currentTarget.querySelector('[id="logout-icon"]');v&&(v.style.color=u)},onMouseLeave:o=>{const e=te?Ho.bg:ie.bgColor,n=te?Ho.color:ie.textColor;o.currentTarget.style.backgroundColor=e,o.currentTarget.style.color=n;const t=o.currentTarget.querySelector('[id="logout-icon"]');t&&(t.style.color=ge())},style:{backgroundColor:te?Ho.bg:ie.bgColor,color:te?Ho.color:ie.textColor,padding:"dark"===qo&&(null===(co=t.config)||void 0===co?void 0:co.enableDarkTheme)&&(null===(uo=null===(so=t.config)||void 0===so?void 0:so.darkTheme)||void 0===uo?void 0:uo.dropdownItemSpacing)?`${parseInt(t.config.darkTheme.dropdownItemPaddingVertical)||6}px ${parseInt(t.config.darkTheme.dropdownItemPaddingHorizontal)||5}px`:`${parseInt(null===(vo=t.config)||void 0===vo?void 0:vo.dropdownItemPaddingVertical)||6}px ${parseInt(null===(fo=t.config)||void 0===fo?void 0:fo.dropdownItemPaddingHorizontal)||5}px`,cursor:"pointer",transition:"all 0.2s ease",fontSize:"dark"===qo&&(null===(go=t.config)||void 0===go?void 0:go.enableDarkTheme)&&(null===(mo=null===(po=t.config)||void 0===po?void 0:po.darkTheme)||void 0===mo?void 0:mo.dropdownFontSize)?t.config.darkTheme.dropdownFontSize:(null===(ho=t.config)||void 0===ho?void 0:ho.dropdownFontSize)||"14px",fontWeight:"dark"===qo&&(null===(wo=t.config)||void 0===wo?void 0:wo.enableDarkTheme)&&(null===(yo=null===(bo=t.config)||void 0===bo?void 0:bo.darkTheme)||void 0===yo?void 0:yo.dropdownFontWeight)?t.config.darkTheme.dropdownFontWeight:(null===(xo=t.config)||void 0===xo?void 0:xo.dropdownFontWeight)||"normal",fontFamily:(null===(Co=t.config)||void 0===Co?void 0:Co.dropdownFontFamily)||"inherit",lineHeight:(null===(ko=t.config)||void 0===ko?void 0:ko.dropdownLineHeight)||"1.2",display:"flex",alignItems:"center",whiteSpace:"nowrap"}},pe(null===(To=t.config)||void 0===To?void 0:To.logoutIcon,ge(),"logout-icon"),(0,o.jsx)("span",null,(()=>{const o=t.config;return"uz"===_o&&(null==o?void 0:o.buttonTextUz)?o.buttonTextUz:"uzcryl"===_o&&(null==o?void 0:o.buttonTextUzCryl)?o.buttonTextUzCryl:"ru"===_o&&(null==o?void 0:o.buttonTextRu)?o.buttonTextRu:Jo.logout||"Выйти"})())));let he=(null===(So=t.config.icon)||void 0===So?void 0:So.svg)||"";/fill=/.test(he.split(">")[0])||(he=he.replace("<svg",'<svg fill="currentColor"')),he=he.replace(/fill="[^"]*"/g,'fill="currentColor"');const we=(null===(Eo=null===(Io=t.config.icon)||void 0===Io?void 0:Io.properties)||void 0===Eo?void 0:Eo.color)||ie.textColor,be={width:(null===(jo=t.config.iconSize)||void 0===jo?void 0:jo.width)||"24px",height:(null===(zo=t.config.iconSize)||void 0===zo?void 0:zo.height)||"24px"},ye=t.config.iconPosition||"left",xe=(null===(No=null===(Lo=t.config)||void 0===Lo?void 0:Lo.icon)||void 0===No?void 0:No.svg)&&"label"!==re?(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:he},style:Object.assign(Object.assign({},be),{color:we,display:"inline-block",flexShrink:0,verticalAlign:"middle"})}):null,Ce="full"===re||"auto"===re?"space-between":"center";return(0,o.jsx)("div",{className:"jimu-widget logout-widget"},(0,o.jsx)(T.Button,{ref:Go,type:te?ne:void 0,className:te?"":"dynamic-hover logout-btn",style:ue,onMouseEnter:()=>Mo(!0),onMouseLeave:()=>Mo(!1),onClick:()=>{if(Go.current){const o=Go.current.getBoundingClientRect();Fo({top:o.bottom+window.scrollY,left:o.right+window.scrollX,width:o.width})}Ao((o=>!o))}},(0,o.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:Ce,gap:"5px",width:"100%",overflow:"hidden",whiteSpace:"nowrap"}},"left"===ye&&xe,ve&&(0,o.jsx)("span",{style:{display:"flex",alignItems:"center",gap:"6px",marginInline:"6px",whiteSpace:"nowrap"}},(()=>{const o=Vo();return o&&o.firstName?o.firstName.charAt(0).toUpperCase():"U"})()),"right"===ye&&xe,fe&&(0,o.jsx)("span",{className:"arrow",style:{display:"flex",alignItems:"center",flexShrink:0}},$o?(0,o.jsx)(u,{size:20}):(0,o.jsx)(v,{size:20})))),n.default.createPortal(me,document.body))};function O(o){d.p=o}})(),l})())}}}));