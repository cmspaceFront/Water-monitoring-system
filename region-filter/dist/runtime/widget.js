System.register(["jimu-core","jimu-core/react"],(function(e,t){var o={},n={};return{setters:[function(e){o.DataSourceComponent=e.DataSourceComponent,o.jsx=e.jsx},function(e){n.useEffect=e.useEffect,n.useState=e.useState}],execute:function(){e((()=>{var e={97759:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var n=o(31601),r=o.n(n),i=o(76314),a=o.n(i)()(r());a.push([e.id,'.dam-gallery{font-family:system-ui,-apple-system,"Segoe UI",sans-serif}.dam-grid{padding:10px}.dam-card{will-change:transform,box-shadow;backface-visibility:hidden;perspective:1000px}.dam-card:focus{outline:2px solid #3b82f6;outline-offset:2px}.dam-card:focus:not(:focus-visible){outline:none}.dam-card img{will-change:transform;backface-visibility:hidden}.dam-card{animation:fadeInUp .6s cubic-bezier(0.4, 0, 0.2, 1) forwards;opacity:0;transform:translateY(20px)}@keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}.dam-card:nth-child(1){animation-delay:.1s}.dam-card:nth-child(2){animation-delay:.2s}.dam-card:nth-child(3){animation-delay:.3s}.dam-card:nth-child(4){animation-delay:.4s}.dam-card:nth-child(5){animation-delay:.5s}.dam-card:nth-child(6){animation-delay:.6s}.dam-card:nth-child(n+7){animation-delay:.7s}@media(max-width: 768px){.dam-grid{grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)) !important;gap:15px !important;padding:5px !important}.dam-card{min-height:240px !important}}@media(max-width: 480px){.dam-grid{grid-template-columns:1fr !important;gap:10px !important}}@media(prefers-reduced-motion: reduce){.dam-card,.dam-card img{animation:none !important;transition:none !important}}@media(prefers-contrast: high){.dam-card{border-width:2px !important;border-color:currentColor !important}}',""]);const l=a},76314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(a[s]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);n&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},31601:e=>{"use strict";e.exports=function(e){return e[1]}},85072:e=>{"use strict";var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var i={},a=[],l=0;l<e.length;l++){var s=e[l],u=n.base?s[0]+n.base:s[0],d=i[u]||0,c="".concat(u," ").concat(d);i[u]=d+1;var f=o(c),v={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(v);else{var p=r(v,n);n.byIndex=l,t.splice(l,0,{identifier:c,updater:p,references:1})}a.push(c)}return a}function r(e,t){var o=t.domAPI(t);o.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,r){var i=n(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var l=o(i[a]);t[l].references--}for(var s=n(e,r),u=0;u<i.length;u++){var d=o(i[u]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=s}}},77659:e=>{"use strict";var t={};e.exports=function(e,o){var n=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(o)}},10540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},55056:(e,t,o)=>{"use strict";e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},97825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var r=void 0!==o.layer;r&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,r&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var i=o.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},41113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},79244:e=>{"use strict";e.exports=o},68972:e=>{"use strict";e.exports=n}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={id:o,exports:{}};return e[o](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="",r.nc=void 0;var i={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(i),r.d(i,{__set_webpack_public_path__:()=>N,default:()=>E});var e=r(79244),t=r(68972),o=r(85072),n=r.n(o),a=r(97825),l=r.n(a),s=r(77659),u=r.n(s),d=r(55056),c=r.n(d),f=r(10540),v=r.n(f),p=r(41113),m=r.n(p),g=r(97759),y={};y.styleTagTransform=m(),y.setAttributes=c(),y.insert=u().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=v();n()(g.A,y);g.A&&g.A.locals&&g.A.locals;var x=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}s((n=n.apply(e,t||[])).next())}))};function h(e){if(!(null==e?void 0:e.folderUrl))return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDI0MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyNDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjRjFGNUY5Ii8+CjxwYXRoIGQ9Ik0xMjAgOTBDMTIwIDg1LjM1NzIgMTE1LjY0MyA4MSAxMTEgODFDMTEwLjQ0OCA4MSAxMTAgODEuNDQ3NyAxMTAgODJWMTAwQzExMCAxMDAuNTUyIDExMC40NDggMTAxIDExMSAxMDFIMTI5QzEyOS41NTIgMTAxIDEzMCAxMDAuNTUyIDEzMCAxMDBWODJDMTMwIDgxLjQ0NzcgMTI5LjU1MiA4MSAxMjkgODFDMTI0LjM1NyA4MSAxMjAgODUuMzU3MiAxMjAgOTBaIiBmaWxsPSIjOTRBM0Y2Ii8+CjxwYXRoIGQ9Ik0xMTAgMTEwQzExMCAxMDkuNDQ4IDExMC40NDggMTA5IDExMSAxMDlIMTI5QzEyOS41NTIgMTA5IDEzMCAxMDkuNDQ4IDEzMCAxMTBWMjAwQzEzMCAyMDAuNTUyIDEyOS41NTIgMjAxIDEyOSAyMDFIMTExQzExMC40NDggMjAxIDExMCAyMDAuNTUyIDExMCAyMDBWMTEwWiIgZmlsbD0iIzk0QTNGOiIvPgo8L3N2Zz4K";return`${e.folderUrl}dist/runtime/assets/placeHolder.png`}function b(e,t,o){var n,r,i,a,l,s,u,d,c,f,v,p,m,g;const y=null!==(n=null==e?void 0:e.default)&&void 0!==n?n:{},x=null!==(r=null==e?void 0:e.hover)&&void 0!==r?r:{},h=t?Object.assign(Object.assign({},y),x):y;return{borderRadius:(null!==(i=h.borderRadius)&&void 0!==i?i:12)+"px",borderWidth:(null!==(a=h.borderWidth)&&void 0!==a?a:1)+"px",borderColor:null!==(l=D(h.borderColor,o))&&void 0!==l?l:"#e2e8f0",background:null!==(s=D(h.backgroundColor,o))&&void 0!==s?s:"#ffffff",color:null!==(u=D(h.textColor,o))&&void 0!==u?u:"#1e293b",padding:(null!==(d=h.padding)&&void 0!==d?d:12)+"px",boxShadow:null!==(c=h.boxShadow)&&void 0!==c?c:"0 2px 8px rgba(0,0,0,0.1)",minHeight:(null!==(f=h.cardHeight)&&void 0!==f?f:280)+"px",minWidth:(null!==(v=h.cardWidth)&&void 0!==v?v:240)+"px",borderStyle:"solid",fontSize:(null!==(p=h.fontSize)&&void 0!==p?p:14)+"px",fontWeight:null!==(m=h.fontWeight)&&void 0!==m?m:500,outline:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden",position:"relative",transform:t?null!==(g=x.transform)&&void 0!==g?g:"translateY(-2px)":"translateY(0)"}}function w(e,t){var o,n,r,i,a;const l=null!==(n=null===(o=null==e?void 0:e.default)||void 0===o?void 0:o.gap)&&void 0!==n?n:20;return{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${null!==(i=null===(r=null==e?void 0:e.default)||void 0===r?void 0:r.cardWidth)&&void 0!==i?i:240}px, 1fr))`,gap:l+"px",alignItems:"stretch",justifyItems:"center",width:"100%",boxSizing:"border-box",padding:"10px",background:null!==(a=D(null==e?void 0:e.parentBackgroundColor,t))&&void 0!==a?a:"#fafbfc",transition:"background 0.1s"}}const S="selected-year",I="selected_dam",M="selected-region";function z(e){return localStorage.getItem(e)}function A(){try{const e=localStorage.getItem("exb_auth");if(e)try{const t=JSON.parse(e);if(t.email)return t.email;if(t.user&&t.user.email)return t.user.email;if(t.username&&t.username.includes("@"))return t.username}catch(e){}const t=Object.keys(localStorage).filter((e=>e.includes("portalApp")||e.includes("portal")||e.includes("token")||e.includes("credential")));for(const e of t)try{const t=localStorage.getItem(e),o=JSON.parse(t||"{}");if(o.email)return o.email}catch(e){continue}const o=Object.keys(localStorage);for(const e of o)try{const t=localStorage.getItem(e);if(t&&(t.includes('"email"')||t.includes("farhodmf")||t.includes("@"))){const e=JSON.parse(t);if(e.email)return e.email}}catch(t){const o=localStorage.getItem(e);if(o&&o.includes("@")&&o.length<100)return o;continue}return null}catch(e){return console.error("\u{1f510} Gallery: Error extracting user email:",e),null}}const j={"\u049a\u043e\u0440\u0430\u049b\u0430\u043b\u043f\u043e\u0493\u0438\u0441\u0442\u043e\u043d \u0420\u0435\u0441\u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0441\u0438":{ru:"\u0420\u0435\u0441\u043f\u0443\u0431\u043b\u0438\u043a\u0430 \u041a\u0430\u0440\u0430\u043a\u0430\u043b\u043f\u0430\u043a\u0441\u0442\u0430\u043d",uz:"Qoraqalpogiston Respublikasi",uzcryl:"\u049a\u043e\u0440\u0430\u049b\u0430\u043b\u043f\u043e\u0493\u0438\u0441\u0442\u043e\u043d \u0420\u0435\u0441\u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0441\u0438"},"\u0410\u043d\u0434\u0438\u0436\u043e\u043d \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0410\u043d\u0434\u0438\u0436\u0430\u043d\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Andijon viloyati",uzcryl:"\u0410\u043d\u0434\u0438\u0436\u043e\u043d \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0411\u0443\u0445\u043e\u0440\u043e \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0411\u0443\u0445\u0430\u0440\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Buxoro viloyati",uzcryl:"\u0411\u0443\u0445\u043e\u0440\u043e \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0424\u0430\u0440\u0493\u043e\u043d\u0430 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0424\u0435\u0440\u0433\u0430\u043d\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Fargona viloyati",uzcryl:"\u0424\u0430\u0440\u0493\u043e\u043d\u0430 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0416\u0438\u0437\u0437\u0430\u0445 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0414\u0436\u0438\u0437\u0430\u043a\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Jizzax viloyati",uzcryl:"\u0416\u0438\u0437\u0437\u0430\u0445 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0425\u043e\u0440\u0430\u0437\u043c \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0425\u043e\u0440\u0435\u0437\u043c\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Xorazm viloyati",uzcryl:"\u0425\u043e\u0440\u0430\u0437\u043c \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u041d\u0430\u043c\u0430\u043d\u0433\u0430\u043d \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u041d\u0430\u043c\u0430\u043d\u0433\u0430\u043d\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Namangan viloyati",uzcryl:"\u041d\u0430\u043c\u0430\u043d\u0433\u0430\u043d \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u041d\u0430\u0432\u043e\u0438\u0439 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u041d\u0430\u0432\u043e\u0438\u0439\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Navoiy viloyati",uzcryl:"\u041d\u0430\u0432\u043e\u0438\u0439 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u049a\u0430\u0448\u049b\u0430\u0434\u0430\u0440\u0451 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u041a\u0430\u0448\u043a\u0430\u0434\u0430\u0440\u044c\u0438\u043d\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Qashqadaryo viloyati",uzcryl:"\u049a\u0430\u0448\u049b\u0430\u0434\u0430\u0440\u0451 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0421\u0430\u043c\u0430\u0440\u049b\u0430\u043d\u0434 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0421\u0430\u043c\u0430\u0440\u043a\u0430\u043d\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Samarqand viloyati",uzcryl:"\u0421\u0430\u043c\u0430\u0440\u049b\u0430\u043d\u0434 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0421\u0438\u0440\u0434\u0430\u0440\u0451 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0421\u044b\u0440\u0434\u0430\u0440\u044c\u0438\u043d\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Sirdaryo viloyati",uzcryl:"\u0421\u0438\u0440\u0434\u0430\u0440\u0451 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0421\u0443\u0440\u0445\u043e\u043d\u0434\u0430\u0440\u0451 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0421\u0443\u0440\u0445\u0430\u043d\u0434\u0430\u0440\u044c\u0438\u043d\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Surxondaryo viloyati",uzcryl:"\u0421\u0443\u0440\u0445\u043e\u043d\u0434\u0430\u0440\u0451 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0422\u043e\u0448\u043a\u0435\u043d\u0442 \u0432\u0438\u043b\u043e\u044f\u0442\u0438":{ru:"\u0422\u0430\u0448\u043a\u0435\u043d\u0442\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c",uz:"Toshkent viloyati",uzcryl:"\u0422\u043e\u0448\u043a\u0435\u043d\u0442 \u0432\u0438\u043b\u043e\u044f\u0442\u0438"},"\u0422\u043e\u0448\u043a\u0435\u043d\u0442 \u0448\u0430\u04b3\u0440\u0438":{ru:"\u0413\u043e\u0440\u043e\u0434 \u0422\u0430\u0448\u043a\u0435\u043d\u0442",uz:"Toshkent shahri",uzcryl:"\u0422\u043e\u0448\u043a\u0435\u043d\u0442 \u0448\u0430\u04b3\u0440\u0438"}};function C(){const e=localStorage.getItem("custom_locale");return"ru"===e||"uz"===e||"uzcryl"===e?e:"ru"}function k(){return"dark"===localStorage.getItem("customTheme")?"dark":"light"}function D(e,t){var o,n;return e&&"object"==typeof e&&(e.light||e.dark)?null!==(n=null!==(o=e[t])&&void 0!==o?o:e.light)&&void 0!==n?n:e.dark:e}function T(e,t,o,n){var r,i;const a=(null===(r=null==e?void 0:e.default)||void 0===r?void 0:r[`${t}Typography`])||{},l=o&&(null===(i=null==e?void 0:e.hover)||void 0===i?void 0:i[`${t}Typography`])||{};return Object.assign(Object.assign({},a),l)}const E=o=>{var n,r,i,a,l,s,u,d,c,f,v,p,m,g,y,E;const[N,_]=(0,t.useState)(),[O,W]=(0,t.useState)([]),[L,U]=(0,t.useState)([]),[R,B]=(0,t.useState)("All"),[H,P]=(0,t.useState)(null),[Q,G]=(0,t.useState)(null),[F,Y]=(0,t.useState)(null),[$,J]=(0,t.useState)(null),[Z,q]=(0,t.useState)(!0),[V,X]=(0,t.useState)(C()),[K,ee]=(0,t.useState)(k());(0,t.useEffect)((()=>{!function(){x(this,void 0,void 0,(function*(){q(!0);try{const e=yield function(){return x(this,arguments,void 0,(function*(e=3,t=1e3){let o=A();if(o)return o;for(let n=1;n<=e;n++)if(yield new Promise((e=>setTimeout(e,t))),o=A(),o)return o;return null}))}(3,1e3);J(e)}catch(e){console.error("\u{1f510} Gallery: Authentication error:",e),J(null)}finally{q(!1)}}))}()}),[]),(0,t.useEffect)((()=>{if($||Z)return;const e=setInterval((()=>{const t=A();t&&(J(t),clearInterval(e))}),2e3),t=setTimeout((()=>{clearInterval(e)}),3e4);return()=>{clearInterval(e),clearTimeout(t)}}),[$,Z]),(0,t.useEffect)((()=>{localStorage.removeItem(I),P(z(S)),B(z(M)||"All"),G(null)}),[]),(0,t.useEffect)((()=>{let e=C();const t=e=>{if("custom_locale"===e.key){const e=C();X(e)}};window.addEventListener("storage",t);const o=setInterval((()=>{const t=C();t!==e&&(e=t,X(t))}),300);return()=>{window.removeEventListener("storage",t),clearInterval(o)}}),[]),(0,t.useEffect)((()=>{let e=k();const t=e=>{if("customTheme"===e.key){const e=k();ee(e)}};window.addEventListener("storage",t);const o=setInterval((()=>{const t=k();t!==e&&(e=t,ee(t))}),300);return()=>{window.removeEventListener("storage",t),clearInterval(o)}}),[]);const te=null===(n=o.useDataSources)||void 0===n?void 0:n[0],oe=(null===(r=o.config)||void 0===r?void 0:r.cardStyle)||{default:{borderRadius:12,borderWidth:1,borderColor:"#e2e8f0",backgroundColor:"#ffffff",textColor:"#1e293b",fontSize:14,fontWeight:500,cardHeight:280,cardWidth:240,padding:12,gap:20,imageHeight:180,imageRadius:8,imageGap:12,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},hover:{borderColor:"#3b82f6",backgroundColor:"#f8fafc",textColor:"#3b82f6",fontWeight:600,boxShadow:"0 8px 25px rgba(59,130,246,0.15)",transform:"translateY(-2px)"},parentBackgroundColor:{light:"#fafbfc",dark:"#18181b"}};(0,t.useEffect)((()=>{let e,t,o;function n(e){switch(e.key){case S:P(e.newValue);break;case M:B(e.newValue||"All");break;case I:G(e.newValue)}}return window.addEventListener("storage",n),e=setInterval((()=>{const e=z(S);e!==H&&P(e)}),100),t=setInterval((()=>{const e=z(M)||"All";e!==R&&B(e)}),100),o=setInterval((()=>{const e=z(I);e!==Q&&G(e)}),100),()=>{window.removeEventListener("storage",n),clearInterval(e),clearInterval(t),clearInterval(o)}}),[H,R,Q]),(0,t.useEffect)((()=>{N&&$&&!Z&&ne()}),[N,$,Z]),(0,t.useEffect)((()=>{if(!$)return void U([]);let e=O;H&&"All"!==H&&(e=e.filter((e=>{var t;const o=((null===(t=null==e?void 0:e.feature)||void 0===t?void 0:t.attributes)||{}).made_year;return o&&o.toString()===H}))),R&&"All"!==R&&(e=e.filter((e=>{var t;return((null===(t=null==e?void 0:e.feature)||void 0===t?void 0:t.attributes)||{}).location===R}))),U(e)}),[O,H,R,$]);const ne=()=>x(void 0,void 0,void 0,(function*(){if(N&&o.id&&$)try{const e={where:"1=1",outFields:["name","location","made_year","allowed_users","title_ru","title_uz_c","title_uz_l"],returnGeometry:!0},t=(yield N.load(e,{widgetId:o.id})).filter((e=>{var t;const o=((null===(t=null==e?void 0:e.feature)||void 0===t?void 0:t.attributes)||{}).allowed_users;if(!o)return!1;return o.split(",").map((e=>e.trim().toLowerCase())).includes($.toLowerCase())})),n=t.map((e=>{var t;const n=((null===(t=null==e?void 0:e.feature)||void 0===t?void 0:t.attributes)||{}).name||"",r=h(o.context),i=function(e,t){if(!e||!(null==t?void 0:t.folderUrl))return null;const o=e.toLowerCase().replace(/\s+/g,"_");return`${t.folderUrl}dist/runtime/assets/dams/${o}.webp`}(n,o.context)||r;return Object.assign(Object.assign({},e),{imageUrl:i})}));W(n)}catch(e){}}));(0,t.useEffect)((()=>{var e,t;const n=null===(e=o.stateProps)||void 0===e?void 0:e.queryString;if(n){const e=n.match(/region\s*=\s*'(.+?)'/i),o=null!==(t=null==e?void 0:e[1])&&void 0!==t?t:"All";B(o)}}),[null===(i=o.stateProps)||void 0===i?void 0:i.queryString]);const re=e=>{var t,n;try{localStorage.setItem(I,e)}catch(e){console.error("\u{1f504} Gallery: Error setting selected_dam:",e)}const r=null===(t=o.config)||void 0===t?void 0:t.linkConfig;if(null==r?void 0:r.value){if("webAddress"===r.linkType||"WEB_ADDRESS"===r.linkType)window.open(r.value,r.openInNewTab?"_blank":"_self");else if("page"===r.linkType||"PAGE"===r.linkType)try{const e=window.location.href,t=new URLSearchParams(window.location.search);t.set("page",r.value);const o=`${e.split("?")[0]}?${t.toString()}`;window.location.href=o}catch(e){console.error("Navigation error:",e)}}else{console.log("\u{1f504} Gallery: No link config set, dam selected:",e);const t=null===(n=o.config)||void 0===n?void 0:n.defaultPageId;if(t)try{const e=window.location.href,o=new URLSearchParams(window.location.search);o.set("page",t);const n=`${e.split("?")[0]}?${o.toString()}`;window.location.href=n}catch(e){console.error("Navigation error:",e)}}};return Z?(0,e.jsx)("div",{className:"widget-custom jimu-widget dam-gallery",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"40px 20px",fontFamily:"system-ui, -apple-system, sans-serif",background:null!==(a=D(oe.parentBackgroundColor,K))&&void 0!==a?a:"#f8fafc"}},(0,e.jsx)("div",{style:{background:null!==(s=D(null===(l=oe.default)||void 0===l?void 0:l.backgroundColor,K))&&void 0!==s?s:"#ffffff",padding:"32px",borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 16px rgba(0,0,0,0.1)"}},(0,e.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:600,fontSize:"18px",color:null!==(d=D(null===(u=oe.default)||void 0===u?void 0:u.textColor,K))&&void 0!==d?d:"#1e293b"}},"ru"===V?"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438...":"uz"===V?"Avtorizatsiya tekshirilmoqda...":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0442\u0435\u043a\u0448\u0438\u0440\u0438\u043b\u043c\u043e\u049b\u0434\u0430..."),(0,e.jsx)("small",{style:{opacity:.7,fontSize:"14px",color:null!==(f=D(null===(c=oe.default)||void 0===c?void 0:c.textColor,K))&&void 0!==f?f:"#64748b"}},"ru"===V?"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435":"uz"===V?"Iltimos kuting":"\u0418\u043b\u0442\u0438\u043c\u043e\u0441 \u043a\u0443\u0442\u0438\u043d\u0433"))):$?(0,e.jsx)("div",{className:"widget-custom jimu-widget dam-gallery",style:{width:"100%",height:"100%",overflowY:"auto",fontFamily:"system-ui, -apple-system, sans-serif",background:null!==(E=D(oe.parentBackgroundColor,K))&&void 0!==E?E:"#fafbfc",transition:"background 0.1s"}},(0,e.jsx)(e.DataSourceComponent,{useDataSource:te,widgetId:o.id,onDataSourceCreated:e=>{_(e)}}),(0,e.jsx)("div",{className:"dam-grid",style:w(oe,K)},L.map(((t,n)=>{var r,i,a,l,s,u,d,c,f,v,p,m,g,y,x,w,S,I,M;const z=(null===(r=null==t?void 0:t.feature)||void 0===r?void 0:r.attributes)||{};let A=z.name||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e";const C=z.name||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e";"ru"===V&&z.title_ru?A=z.title_ru:"uz"===V&&z.title_uz_l?A=z.title_uz_l:"uzcryl"===V&&z.title_uz_c&&(A=z.title_uz_c);const k=z.location||"",E=(null===(i=j[k])||void 0===i?void 0:i[V])||k,N=(z.made_year,t.imageUrl||h(o.context)),_=F===n,O=null!==(l=null===(a=oe.default)||void 0===a?void 0:a.imageHeight)&&void 0!==l?l:180,W=null!==(u=null===(s=oe.default)||void 0===s?void 0:s.imageRadius)&&void 0!==u?u:8,L=null!==(c=null===(d=oe.default)||void 0===d?void 0:d.imageGap)&&void 0!==c?c:12,U=T(oe,"region",_),R=(T(oe,"year",_),T(oe,"dam",_));return(0,e.jsx)("div",{className:"dam-card",key:n,style:b(oe,_,K),tabIndex:0,onMouseEnter:()=>Y(n),onMouseLeave:()=>Y(null),onClick:()=>re(C),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),re(A))}},(0,e.jsx)("div",{style:{width:"100%",height:O+"px",overflow:"hidden",borderRadius:W+"px",marginBottom:L+"px",position:"relative",background:"#f1f5f9"}},(0,e.jsx)("img",{src:N,alt:A,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:_?"scale(1.15)":"scale(1)"},onError:e=>{e.target.src=h(o.context)}}),(0,e.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"50%",background:"linear-gradient(transparent, rgba(0,0,0,0.1))",pointerEvents:"none"}})),(0,e.jsx)("div",{style:{width:"100%",textAlign:"left",flex:"1",display:"flex",flexDirection:"column",justifyContent:"flex-start"}},(0,e.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"}},(0,e.jsx)("span",{style:{fontSize:(null!==(f=U.fontSize)&&void 0!==f?f:12)+"px",color:D(U.textColor,K)||(_?D(null===(v=oe.hover)||void 0===v?void 0:v.textColor,K)||"#3b82f6":"#64748b"),fontWeight:null!==(p=U.fontWeight)&&void 0!==p?p:500,lineHeight:U.lineHeight?U.lineHeight.toString():"1.2",letterSpacing:void 0!==U.letterSpacing?U.letterSpacing+"px":"0.025em",textTransform:"uppercase",transition:"color 0.3s ease"}},E)),(0,e.jsx)("div",{style:{fontSize:(null!==(m=R.fontSize)&&void 0!==m?m:14)+"px",fontWeight:null!==(g=R.fontWeight)&&void 0!==g?g:_?null!==(x=null===(y=oe.hover)||void 0===y?void 0:y.fontWeight)&&void 0!==x?x:600:null!==(S=null===(w=oe.default)||void 0===w?void 0:w.fontWeight)&&void 0!==S?S:500,color:D(R.textColor,K)||(_?D(null===(I=oe.hover)||void 0===I?void 0:I.textColor,K)||"#3b82f6":D(null===(M=oe.default)||void 0===M?void 0:M.textColor,K)||"#1e293b"),lineHeight:R.lineHeight?R.lineHeight.toString():"1.4",letterSpacing:void 0!==R.letterSpacing?R.letterSpacing+"px":"normal",transition:"all 0.3s ease",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}},A)))})))):(0,e.jsx)("div",{className:"widget-custom jimu-widget dam-gallery",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"40px 20px",fontFamily:"system-ui, -apple-system, sans-serif"}},(0,e.jsx)("div",{style:{background:null!==(v=D(oe.parentBackgroundColor,K))&&void 0!==v?v:"#f8fafc",padding:"32px",borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 16px rgba(0,0,0,0.1)"}},(0,e.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:600,fontSize:"18px",color:null!==(m=D(null===(p=oe.default)||void 0===p?void 0:p.textColor,K))&&void 0!==m?m:"#1e293b"}},"ru"===V?"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d":"uz"===V?"Foydalanuvchi avtorizatsiya qilinmagan":"\u0424\u043e\u0439\u0434\u0430\u043b\u0430\u043d\u0443\u0432\u0447\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u049b\u0438\u043b\u0438\u043d\u043c\u0430\u0433\u0430\u043d"),(0,e.jsx)("small",{style:{opacity:.7,fontSize:"14px",color:null!==(y=D(null===(g=oe.default)||void 0===g?void 0:g.textColor,K))&&void 0!==y?y:"#64748b"}},"ru"===V?"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u043f\u043b\u043e\u0442\u0438\u043d":"uz"===V?"To'g'onlarni ko'rish uchun tizimga kiring":"\u0422\u045e\u0493\u043e\u043d\u043b\u0430\u0440\u043d\u0438 \u043a\u045e\u0440\u0438\u0448 \u0443\u0447\u0443\u043d \u0442\u0438\u0437\u0438\u043c\u0433\u0430 \u043a\u0438\u0440\u0438\u043d\u0433")))};function N(e){r.p=e}})(),i})())}}}));