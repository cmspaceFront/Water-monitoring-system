System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/basic/color-picker","jimu-ui/advanced/data-source-selector","jimu-core/react"],(function(e,t){var o={},a={},l={},r={},n={},i={};return{setters:[function(e){o.DataSourceManager=e.DataSourceManager,o.DataSourceTypes=e.DataSourceTypes,o.Immutable=e.Immutable,o.jsx=e.jsx},function(e){a.SettingRow=e.SettingRow},function(e){l.Button=e.Button,l.NumericInput=e.NumericInput,l.Option=e.Option,l.Select=e.Select,l.Switch=e.Switch,l.TextInput=e.TextInput},function(e){r.ColorPicker=e.ColorPicker},function(e){n.DataSourceSelector=e.DataSourceSelector},function(e){i.useEffect=e.useEffect,i.useState=e.useState}],execute:function(){e((()=>{var e={48891:e=>{"use strict";e.exports=o},51315:e=>{"use strict";e.exports=i},30726:e=>{"use strict";e.exports=l},338:e=>{"use strict";e.exports=n},77756:e=>{"use strict";e.exports=a},41362:e=>{"use strict";e.exports=r}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,s),l.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var d={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(d),s.d(d,{__set_webpack_public_path__:()=>i,default:()=>n});var e=s(48891),t=s(77756),o=s(30726),a=s(41362),l=s(338),r=s(51315);function n(n){const{config:i,id:s,useDataSources:d,onSettingChange:c}=n,[u,x]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[b,C]=(0,r.useState)(!0),[v,h]=(0,r.useState)([]);(0,r.useEffect)((()=>{if((null==d?void 0:d.length)>0){const t=e.DataSourceManager.getInstance().getDataSource(d[0].dataSourceId);if(t){const e=t.getSchema(),o=Object.values(e.fields||{});h(o)}}}),[d]),(0,r.useEffect)((()=>{i.bgColor||w("bgColor",{color:"#f5f5f5"}),i.gridGap||w("gridGap","12px"),i.gridWidth||w("gridWidth","100%"),i.gridHeight||w("gridHeight","100%"),i.cardBgColor||w("cardBgColor",{color:"#ffffff"}),i.cardBorderRadius||w("cardBorderRadius","10px"),i.cardPadding||w("cardPadding","16px"),i.cardBorderWidth||w("cardBorderWidth","1px"),i.cardBorderColor||w("cardBorderColor",{color:"#cccccc"}),i.cardDisplay||w("cardDisplay","column"),i.cardWidth||w("cardWidth","100%"),i.cardHeight||w("cardHeight","100%"),i.textColor||w("textColor",{color:"#000000"}),i.labelColor||w("labelColor",{color:"#4A4A4A"}),i.labelFontSize||w("labelFontSize","14px"),i.valueFontSize||w("valueFontSize","20px"),i.labelFontWeight||w("labelFontWeight","500"),i.valueFontWeight||w("valueFontWeight","700")}),[i]);const w=(e,t)=>{c({id:s,config:i.set(e,t)}),(e.includes("Color")||e.includes("color"))&&window.dispatchEvent(new CustomEvent("customThemeChanged"))};(0,r.useEffect)((()=>{i.statsConfig||c({id:s,config:i.set("statsConfig",[{labelKey:"fpu",field:"fpu",labelText:{},unitText:{}},{labelKey:"designVolume",field:"fact_volum",labelText:{},unitText:{}},{labelKey:"designArea",field:"fact_squar",labelText:{},unitText:{}},{labelKey:"npu",field:"npu",labelText:{},unitText:{}},{labelKey:"bathymetricVolume",field:"project_vo",labelText:{},unitText:{}},{labelKey:"bathymetricArea",field:"project_sq",labelText:{},unitText:{}},{labelKey:"dso",field:"umo",labelText:{},unitText:{}},{labelKey:"volumeDiff",field:"terrain_he",labelText:{},unitText:{}},{labelKey:"areaDiff",field:"max_height",labelText:{},unitText:{}}])})}),[]);const S=(e,t,o)=>{const a=[...i.statsConfig||[]];a[e]=Object.assign(Object.assign({},a[e]),{[t]:o}),c({id:s,config:i.set("statsConfig",a)})},m=(0,e.Immutable)([e.DataSourceTypes.FeatureLayer]),y={borderTop:"1px solid var(--light-300)",padding:"16px 12px",marginTop:12},T={display:"flex",justifyContent:"space-between",flexDirection:"column",alignItems:"center",fontWeight:"bold",paddingInline:"12px",marginBottom:"8px"},k={paddingLeft:"12px",paddingRight:"12px"};return(0,e.jsx)("div",{className:"widget-setting"},(0,e.jsx)("div",{style:Object.assign(Object.assign({},y),{borderTop:"none",marginTop:0})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},T),{marginBottom:12})},(0,e.jsx)("span",null,"Источник данных")),(0,e.jsx)(l.DataSourceSelector,{mustUseDataSource:!0,types:m,useDataSources:d,onChange:e=>{c({id:s,useDataSources:e})},widgetId:s})),(0,e.jsx)("div",{style:y},(0,e.jsx)("div",{style:T},(0,e.jsx)("span",null,"Поля карточек"),(0,e.jsx)("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexDirection:"column"}},(0,e.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"6px",paddingTop:"8px",width:"100%"}},(0,e.jsx)("span",{style:{fontSize:"13px",color:"#fff",fontWeight:"500"}},"Показать поля единиц измерения"),(0,e.jsx)(o.Switch,{checked:b,onChange:e=>C(e.target.checked)})),(0,e.jsx)(o.Button,{type:"primary",onClick:()=>{const e=[...i.statsConfig||[],{labelKey:"",field:"",labelText:{},unitText:{}}];c({id:s,config:i.set("statsConfig",e)})}},"Добавить карточку"))),(i.statsConfig||[]).map(((a,l)=>{var r,n,d,u,x,g;return(0,e.jsx)("div",{key:l,style:{marginBottom:8,borderBottom:"1px solid #ccc",paddingBottom:8}},(0,e.jsx)(t.SettingRow,{label:"Label (Uz)"},(0,e.jsx)(o.TextInput,{value:(null===(r=a.labelText)||void 0===r?void 0:r.uz)||"",onChange:e=>S(l,"labelText",Object.assign(Object.assign({},a.labelText),{uz:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:"Label (Кирилл)"},(0,e.jsx)(o.TextInput,{value:(null===(n=a.labelText)||void 0===n?void 0:n.uzcryl)||"",onChange:e=>S(l,"labelText",Object.assign(Object.assign({},a.labelText),{uzcryl:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:"Label (Рус)"},(0,e.jsx)(o.TextInput,{value:(null===(d=a.labelText)||void 0===d?void 0:d.ru)||"",onChange:e=>S(l,"labelText",Object.assign(Object.assign({},a.labelText),{ru:e.target.value}))})),b&&(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px",padding:"8px",borderRadius:"6px"}},(0,e.jsx)("div",null,(0,e.jsx)("label",{style:{fontSize:"12px",color:"#fff",marginBottom:"4px",display:"block"}},"Единица (Uz)"),(0,e.jsx)(o.TextInput,{value:(null===(u=a.unitText)||void 0===u?void 0:u.uz)||"",onChange:e=>S(l,"unitText",Object.assign(Object.assign({},a.unitText),{uz:e.target.value})),placeholder:"м³, км², %",size:"sm"})),(0,e.jsx)("div",null,(0,e.jsx)("label",{style:{fontSize:"12px",color:"#fff",marginBottom:"4px",display:"block"}},"Единица (Кирилл)"),(0,e.jsx)(o.TextInput,{value:(null===(x=a.unitText)||void 0===x?void 0:x.uzcryl)||"",onChange:e=>S(l,"unitText",Object.assign(Object.assign({},a.unitText),{uzcryl:e.target.value})),placeholder:"м³, км², %",size:"sm"})),(0,e.jsx)("div",null,(0,e.jsx)("label",{style:{fontSize:"12px",color:"#fff",marginBottom:"4px",display:"block"}},"Единица (Рус)"),(0,e.jsx)(o.TextInput,{value:(null===(g=a.unitText)||void 0===g?void 0:g.ru)||"",onChange:e=>S(l,"unitText",Object.assign(Object.assign({},a.unitText),{ru:e.target.value})),placeholder:"м³, км², %",size:"sm"}))),(0,e.jsx)(t.SettingRow,{label:`Field #${l+1}`,flow:"wrap"},(0,e.jsx)(o.Select,{value:a.field,onChange:e=>S(l,"field",e.target.value)},v.map(((t,a)=>(0,e.jsx)(o.Option,{key:a,value:t.jimuName},t.alias||t.name))))),(0,e.jsx)(o.Button,{type:"danger",size:"sm",onClick:()=>(e=>{const t=[...i.statsConfig||[]];t.splice(e,1),c({id:s,config:i.set("statsConfig",t)})})(l)},"Удалить"))}))),(0,e.jsx)("div",{style:y},(0,e.jsx)("div",{style:T},(0,e.jsx)("span",null,"Grid Styles"),(0,e.jsx)(o.Switch,{checked:u,onChange:e=>x(e.target.checked)})),u&&(0,e.jsx)("div",{style:k},(0,e.jsx)(t.SettingRow,{label:"Grid Background Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.bgColor||"#f5f5f5",onChange:e=>w("bgColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Grid Gap (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.gridGap)||12,onChange:e=>w("gridGap",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Grid Width",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.gridWidth||"100%",onChange:e=>w("gridWidth",e.target.value),placeholder:"e.g., 100% or 500px"})),(0,e.jsx)(t.SettingRow,{label:"Grid Template Columns",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.gridTemplateColumns||"repeat(3, 1fr)",onChange:e=>w("gridTemplateColumns",e.target.value),placeholder:"e.g., repeat(3, 1fr) or 1fr 2fr"})))),(0,e.jsx)("div",{style:y},(0,e.jsx)("div",{style:T},(0,e.jsx)("span",null,"Card Styles"),(0,e.jsx)(o.Switch,{checked:g,onChange:e=>p(e.target.checked)})),g&&(0,e.jsx)("div",{style:k},(0,e.jsx)(t.SettingRow,{label:"Card Background Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBgColor||"#ffffff",onChange:e=>w("cardBgColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Radius (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.cardBorderRadius)||10,onChange:e=>w("cardBorderRadius",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Padding (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.cardPadding)||16,onChange:e=>w("cardPadding",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Width (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.cardBorderWidth)||1,onChange:e=>w("cardBorderWidth",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBorderColor||"#cccccc",onChange:e=>w("cardBorderColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Card Content Orientation",flow:"wrap"},(0,e.jsx)(o.Select,{value:i.cardDisplay||"column",onChange:e=>w("cardDisplay",e.target.value)},(0,e.jsx)(o.Option,{value:"column"},"Vertical"),(0,e.jsx)(o.Option,{value:"row"},"Horizontal"))),(0,e.jsx)(t.SettingRow,{label:"Card Width",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.cardWidth||"100%",onChange:e=>w("cardWidth",e.target.value),placeholder:"e.g., 100% or 200px"})),(0,e.jsx)(t.SettingRow,{label:"Card Height",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.cardHeight||"100%",onChange:e=>w("cardHeight",e.target.value),placeholder:"e.g., 100% or 200px"})))),(0,e.jsx)("div",{style:y},(0,e.jsx)("div",{style:T},(0,e.jsx)("span",null,"Text Styles"),(0,e.jsx)(o.Switch,{checked:f,onChange:e=>j(e.target.checked)})),f&&(0,e.jsx)("div",{style:k},(0,e.jsx)(t.SettingRow,{label:"Value Text Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.textColor||"#000000",onChange:e=>w("textColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Value Font Size (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.valueFontSize)||20,onChange:e=>w("valueFontSize",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Value Font Weight",flow:"wrap"},(0,e.jsx)(o.Select,{value:i.valueFontWeight||"700",onChange:e=>w("valueFontWeight",e.target.value)},(0,e.jsx)(o.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(o.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(o.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(o.Option,{value:"700"},"Bold (700)"))),(0,e.jsx)(t.SettingRow,{label:"Label Text Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.labelColor||"#4A4A4A",onChange:e=>w("labelColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Label Font Size (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.labelFontSize)||14,onChange:e=>w("labelFontSize",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Label Font Weight",flow:"wrap"},(0,e.jsx)(o.Select,{value:i.labelFontWeight||"500",onChange:e=>w("labelFontWeight",e.target.value)},(0,e.jsx)(o.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(o.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(o.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(o.Option,{value:"700"},"Bold (700)"))))),(0,e.jsx)("div",{style:y},(0,e.jsx)("div",{style:T},(0,e.jsx)("span",null,"Настройки форматирования")),(0,e.jsx)("div",{style:k},(0,e.jsx)("div",{style:{padding:"12px",backgroundColor:"#e8f4fd",borderRadius:"6px",border:"1px solid #b8daff",color:"#004085"}},(0,e.jsx)("strong",null,"Форматирование значений:")," Все числовые значения отображаются с фиксированным количеством знаков после запятой (2 знака)."))),(0,e.jsx)("div",{style:Object.assign(Object.assign({},y),{background:"#23272f",borderRadius:10,marginTop:32})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},T),{color:"#fff",fontWeight:700,fontSize:17,marginBottom:14})},"Цвета для тёмной темы"),(0,e.jsx)("div",{style:k},(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Grid Background (bgColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.bgColorDark||"#23272f",onChange:e=>w("bgColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Background (cardBgColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBgColorDark||"#23272f",onChange:e=>w("cardBgColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Border Color (cardBorderColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBorderColorDark||"#444",onChange:e=>w("cardBorderColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Value Text Color (textColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.textColorDark||"#fff",onChange:e=>w("textColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Label Text Color (labelColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.labelColorDark||"#aaa",onChange:e=>w("labelColorDark",e)})))))}function i(e){s.p=e}})(),d})())}}}));