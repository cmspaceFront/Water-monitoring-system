System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/basic/color-picker","jimu-ui/advanced/data-source-selector","jimu-core/react"],(function(e,t){var o={},a={},l={},r={},n={},i={};return{setters:[function(e){o.DataSourceManager=e.DataSourceManager,o.DataSourceTypes=e.DataSourceTypes,o.Immutable=e.Immutable,o.jsx=e.jsx},function(e){a.SettingRow=e.SettingRow},function(e){l.Button=e.Button,l.NumericInput=e.NumericInput,l.Option=e.Option,l.Select=e.Select,l.Switch=e.Switch,l.TextInput=e.TextInput},function(e){r.ColorPicker=e.ColorPicker},function(e){n.DataSourceSelector=e.DataSourceSelector},function(e){i.useEffect=e.useEffect,i.useState=e.useState}],execute:function(){e((()=>{var e={79244:e=>{"use strict";e.exports=o},68972:e=>{"use strict";e.exports=i},14321:e=>{"use strict";e.exports=l},13089:e=>{"use strict";e.exports=n},79298:e=>{"use strict";e.exports=a},54337:e=>{"use strict";e.exports=r}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,s),l.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var c={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(c),s.d(c,{__set_webpack_public_path__:()=>i,default:()=>n});var e=s(79244),t=s(79298),o=s(14321),a=s(54337),l=s(13089),r=s(68972);function n(n){const{config:i,id:s,useDataSources:c,onSettingChange:d}=n,[u,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[b,C]=(0,r.useState)([]);(0,r.useEffect)((()=>{if((null==c?void 0:c.length)>0){const t=e.DataSourceManager.getInstance().getDataSource(c[0].dataSourceId);if(t){const e=t.getSchema(),o=Object.values(e.fields||{});C(o)}}}),[c]),(0,r.useEffect)((()=>{i.bgColor||h("bgColor",{color:"#f5f5f5"}),i.gridGap||h("gridGap","12px"),i.gridWidth||h("gridWidth","100%"),i.gridHeight||h("gridHeight","auto"),i.cardBgColor||h("cardBgColor",{color:"#ffffff"}),i.cardBorderRadius||h("cardBorderRadius","10px"),i.cardPadding||h("cardPadding","16px"),i.cardBorderWidth||h("cardBorderWidth","1px"),i.cardBorderColor||h("cardBorderColor",{color:"#cccccc"}),i.cardDisplay||h("cardDisplay","column"),i.cardWidth||h("cardWidth","100%"),i.cardHeight||h("cardHeight","100%"),i.textColor||h("textColor",{color:"#000000"}),i.labelColor||h("labelColor",{color:"#4A4A4A"}),i.labelFontSize||h("labelFontSize","14px"),i.valueFontSize||h("valueFontSize","20px"),i.labelFontWeight||h("labelFontWeight","500"),i.valueFontWeight||h("valueFontWeight","700")}),[i]);const h=(e,t)=>{d({id:s,config:i.set(e,t)}),(e.includes("Color")||e.includes("color"))&&window.dispatchEvent(new CustomEvent("customThemeChanged"))};(0,r.useEffect)((()=>{i.statsConfig||d({id:s,config:i.set("statsConfig",[{labelKey:"fpu",field:"fpu"},{labelKey:"designVolume",field:"fact_volum"},{labelKey:"designArea",field:"fact_squar"},{labelKey:"npu",field:"npu"},{labelKey:"bathymetricVolume",field:"project_vo"},{labelKey:"bathymetricArea",field:"project_sq"},{labelKey:"dso",field:"umo"},{labelKey:"volumeDiff",field:"terrain_he"},{labelKey:"areaDiff",field:"max_height"}])})}),[]);const w=(e,t,o)=>{const a=[...i.statsConfig||[]];a[e]=Object.assign(Object.assign({},a[e]),{[t]:o}),d({id:s,config:i.set("statsConfig",a)})},v=(0,e.Immutable)([e.DataSourceTypes.FeatureLayer]),S={borderTop:"1px solid var(--light-300)",padding:"16px 12px",marginTop:12},m={display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"bold",paddingInline:"12px",marginBottom:"8px"},y={paddingLeft:"12px",paddingRight:"12px"};return(0,e.jsx)("div",{className:"widget-setting"},(0,e.jsx)("div",{style:Object.assign(Object.assign({},S),{borderTop:"none",marginTop:0})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},m),{marginBottom:12})},(0,e.jsx)("span",null,"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0434\u0430\u043d\u043d\u044b\u0445")),(0,e.jsx)(l.DataSourceSelector,{mustUseDataSource:!0,types:v,useDataSources:c,onChange:e=>{d({id:s,useDataSources:e})},widgetId:s})),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"\u041f\u043e\u043b\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a"),(0,e.jsx)(o.Button,{type:"primary",onClick:()=>{const e=[...i.statsConfig||[],{labelKey:"",field:""}];d({id:s,config:i.set("statsConfig",e)})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),(i.statsConfig||[]).map(((a,l)=>{var r,n,c;return(0,e.jsx)("div",{key:l,style:{marginBottom:8,borderBottom:"1px solid #ccc",paddingBottom:8}},(0,e.jsx)(t.SettingRow,{label:"Label (Uz)"},(0,e.jsx)(o.TextInput,{value:(null===(r=a.labelText)||void 0===r?void 0:r.uz)||"",onChange:e=>w(l,"labelText",Object.assign(Object.assign({},a.labelText),{uz:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:"Label (\u041a\u0438\u0440\u0438\u043b\u043b)"},(0,e.jsx)(o.TextInput,{value:(null===(n=a.labelText)||void 0===n?void 0:n.uzcryl)||"",onChange:e=>w(l,"labelText",Object.assign(Object.assign({},a.labelText),{uzcryl:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:"Label (\u0420\u0443\u0441)"},(0,e.jsx)(o.TextInput,{value:(null===(c=a.labelText)||void 0===c?void 0:c.ru)||"",onChange:e=>w(l,"labelText",Object.assign(Object.assign({},a.labelText),{ru:e.target.value}))})),(0,e.jsx)(t.SettingRow,{label:`Field #${l+1}`,flow:"wrap"},(0,e.jsx)(o.Select,{value:a.field,onChange:e=>w(l,"field",e.target.value)},b.map(((t,a)=>(0,e.jsx)(o.Option,{key:a,value:t.jimuName},t.alias||t.name))))),(0,e.jsx)(o.Button,{type:"danger",size:"sm",onClick:()=>(e=>{const t=[...i.statsConfig||[]];t.splice(e,1),d({id:s,config:i.set("statsConfig",t)})})(l)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))}))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Grid Styles"),(0,e.jsx)(o.Switch,{checked:u,onChange:e=>g(e.target.checked)})),u&&(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:"Grid Background Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.bgColor||"#f5f5f5",onChange:e=>h("bgColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Grid Gap (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.gridGap)||12,onChange:e=>h("gridGap",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Grid Width",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.gridWidth||"100%",onChange:e=>h("gridWidth",e.target.value),placeholder:"e.g., 100% or 500px"})),(0,e.jsx)(t.SettingRow,{label:"Grid Height",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.gridHeight||"auto",onChange:e=>h("gridHeight",e.target.value),placeholder:"e.g., auto or 500px"})),(0,e.jsx)(t.SettingRow,{label:"Grid Template Columns",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.gridTemplateColumns||"repeat(3, 1fr)",onChange:e=>h("gridTemplateColumns",e.target.value),placeholder:"e.g., repeat(3, 1fr) or 1fr 2fr"})))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Card Styles"),(0,e.jsx)(o.Switch,{checked:x,onChange:e=>p(e.target.checked)})),x&&(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:"Card Background Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBgColor||"#ffffff",onChange:e=>h("cardBgColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Radius (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.cardBorderRadius)||10,onChange:e=>h("cardBorderRadius",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Padding (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.cardPadding)||16,onChange:e=>h("cardPadding",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Width (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.cardBorderWidth)||1,onChange:e=>h("cardBorderWidth",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Card Border Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBorderColor||"#cccccc",onChange:e=>h("cardBorderColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Card Content Orientation",flow:"wrap"},(0,e.jsx)(o.Select,{value:i.cardDisplay||"column",onChange:e=>h("cardDisplay",e.target.value)},(0,e.jsx)(o.Option,{value:"column"},"Vertical"),(0,e.jsx)(o.Option,{value:"row"},"Horizontal"))),(0,e.jsx)(t.SettingRow,{label:"Card Width",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.cardWidth||"100%",onChange:e=>h("cardWidth",e.target.value),placeholder:"e.g., 100% or 200px"})),(0,e.jsx)(t.SettingRow,{label:"Card Height",flow:"wrap"},(0,e.jsx)(o.TextInput,{value:i.cardHeight||"100%",onChange:e=>h("cardHeight",e.target.value),placeholder:"e.g., 100% or 200px"})))),(0,e.jsx)("div",{style:S},(0,e.jsx)("div",{style:m},(0,e.jsx)("span",null,"Text Styles"),(0,e.jsx)(o.Switch,{checked:f,onChange:e=>j(e.target.checked)})),f&&(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:"Value Text Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.textColor||"#000000",onChange:e=>h("textColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Value Font Size (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.valueFontSize)||20,onChange:e=>h("valueFontSize",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Value Font Weight",flow:"wrap"},(0,e.jsx)(o.Select,{value:i.valueFontWeight||"700",onChange:e=>h("valueFontWeight",e.target.value)},(0,e.jsx)(o.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(o.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(o.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(o.Option,{value:"700"},"Bold (700)"))),(0,e.jsx)(t.SettingRow,{label:"Label Text Color",flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.labelColor||"#4A4A4A",onChange:e=>h("labelColor",e)})),(0,e.jsx)(t.SettingRow,{label:"Label Font Size (px)",flow:"wrap"},(0,e.jsx)(o.NumericInput,{value:parseInt(i.labelFontSize)||14,onChange:e=>h("labelFontSize",`${e}px`)})),(0,e.jsx)(t.SettingRow,{label:"Label Font Weight",flow:"wrap"},(0,e.jsx)(o.Select,{value:i.labelFontWeight||"500",onChange:e=>h("labelFontWeight",e.target.value)},(0,e.jsx)(o.Option,{value:"400"},"Normal (400)"),(0,e.jsx)(o.Option,{value:"500"},"Medium (500)"),(0,e.jsx)(o.Option,{value:"600"},"Semi-bold (600)"),(0,e.jsx)(o.Option,{value:"700"},"Bold (700)"))))),(0,e.jsx)("div",{style:Object.assign(Object.assign({},S),{background:"#23272f",borderRadius:10,marginTop:32})},(0,e.jsx)("div",{style:Object.assign(Object.assign({},m),{color:"#fff",fontWeight:700,fontSize:17,marginBottom:14})},"\u0426\u0432\u0435\u0442\u0430 \u0434\u043b\u044f \u0442\u0451\u043c\u043d\u043e\u0439 \u0442\u0435\u043c\u044b"),(0,e.jsx)("div",{style:y},(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Grid Background (bgColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.bgColorDark||"#23272f",onChange:e=>h("bgColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Background (cardBgColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBgColorDark||"#23272f",onChange:e=>h("cardBgColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Card Border Color (cardBorderColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.cardBorderColorDark||"#444",onChange:e=>h("cardBorderColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Value Text Color (textColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.textColorDark||"#fff",onChange:e=>h("textColorDark",e)})),(0,e.jsx)(t.SettingRow,{label:(0,e.jsx)("span",{style:{color:"#fff"}},"Label Text Color (labelColorDark)"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{color:i.labelColorDark||"#aaa",onChange:e=>h("labelColorDark",e)})))))}function i(e){s.p=e}})(),c})())}}}));