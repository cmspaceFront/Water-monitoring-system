/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-core/react","jimu-core/react-dom","jimu-ui"],(function(e,o){var t={},r={},n={},i={};return{setters:[function(e){t.getAppStore=e.getAppStore,t.jsx=e.jsx},function(e){r.createElement=e.createElement,r.forwardRef=e.forwardRef,r.useEffect=e.useEffect,r.useRef=e.useRef,r.useState=e.useState},function(e){n.default=e.default},function(e){i.Button=e.Button}],execute:function(){e((()=>{var e={6097:(e,o,t)=>{"use strict";t.d(o,{Z:()=>c});var r=t(8081),n=t.n(r),i=t(3645),a=t.n(i)()(n());a.push([e.id,".language-widget{font-family:sans-serif;position:relative}.lang-btn{border:none;cursor:pointer;text-align:center;display:flex;align-items:center;height:auto;white-space:nowrap;overflow:visible}.arrow{font-size:12px}.dropdown{position:absolute;background-color:#fff;border-radius:8px;z-index:9999;box-shadow:0 2px 6px rgba(0,0,0,.15);overflow:hidden;display:flex;flex-direction:column;margin-top:3px}.dropdown-item{padding:6px 10px;cursor:pointer;transition:all .2s ease;margin:0;border:none}",""]);const c=a},3645:e=>{"use strict";e.exports=function(e){var o=[];return o.toString=function(){return this.map((function(o){var t="",r=void 0!==o[5];return o[4]&&(t+="@supports (".concat(o[4],") {")),o[2]&&(t+="@media ".concat(o[2]," {")),r&&(t+="@layer".concat(o[5].length>0?" ".concat(o[5]):""," {")),t+=e(o),r&&(t+="}"),o[2]&&(t+="}"),o[4]&&(t+="}"),t})).join("")},o.i=function(e,t,r,n,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),o.push(d))}},o}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},3379:e=>{"use strict";var o=[];function t(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},a=[],c=0;c<e.length;c++){var s=e[c],l=r.base?s[0]+r.base:s[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var f=t(u),v={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)o[f].references++,o[f].updater(v);else{var p=n(v,r);r.byIndex=c,o.splice(c,0,{identifier:u,updater:p,references:1})}a.push(u)}return a}function n(e,o){var t=o.domAPI(o);return t.update(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap&&o.supports===e.supports&&o.layer===e.layer)return;t.update(e=o)}else t.remove()}}e.exports=function(e,n){var i=r(e=e||[],n=n||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=t(i[a]);o[c].references--}for(var s=r(e,n),l=0;l<i.length;l++){var d=t(i[l]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}i=s}}},569:e=>{"use strict";var o={};e.exports=function(e,t){var r=function(e){if(void 0===o[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}o[e]=t}return o[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},9216:e=>{"use strict";e.exports=function(e){var o=document.createElement("style");return e.setAttributes(o,e.attributes),e.insert(o,e.options),o}},3565:(e,o,t)=>{"use strict";e.exports=function(e){var o=t.nc;o&&e.setAttribute("nonce",o)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var o=e.insertStyleElement(e);return{update:function(t){!function(e,o,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var n=void 0!==t.layer;n&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,n&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),o.styleTagTransform(r,e,o.options)}(o,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)}}}},4589:e=>{"use strict";e.exports=function(e,o){if(o.styleSheet)o.styleSheet.cssText=e;else{for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(document.createTextNode(e))}}},8891:e=>{"use strict";e.exports=t},1315:e=>{"use strict";e.exports=r},800:e=>{"use strict";e.exports=n},726:e=>{"use strict";e.exports=i}},o={};function a(t){var r=o[t];if(void 0!==r)return r.exports;var n=o[t]={id:t,exports:{}};return e[t](n,n.exports,a),n.exports}a.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return a.d(o,{a:o}),o},a.d=(e,o)=>{for(var t in o)a.o(o,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},a.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",a.nc=void 0;var c={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(c),a.d(c,{__set_webpack_public_path__:()=>q,default:()=>$});var e=a(8891),o=a(1315),t=a(800);const r=e=>{const o=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,o,t)=>t?t.toUpperCase():o.toLowerCase())))(e);return o.charAt(0).toUpperCase()+o.slice(1)},n=(...e)=>e.filter(((e,o,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===o)).join(" ").trim(),i=e=>{for(const o in e)if(o.startsWith("aria-")||"role"===o||"title"===o)return!0};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,o.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:c="",children:l,iconNode:d,...u},f)=>(0,o.createElement)("svg",{ref:f,...s,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:n("lucide",c),...!l&&!i(u)&&{"aria-hidden":"true"},...u},[...d.map((([e,t])=>(0,o.createElement)(e,t))),...Array.isArray(l)?l:[l]]))),d=(e,t)=>{const i=(0,o.forwardRef)((({className:i,...a},c)=>{return(0,o.createElement)(l,{ref:c,iconNode:t,className:n(`lucide-${s=r(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...a});var s}));return i.displayName=r(e),i},u=d("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),f=d("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),v={Promise:"undefined"!=typeof window?window.Promise:void 0};var p="4.25",g="next";function m(e){if(e.toLowerCase()===g)return g;var o=e&&e.match(/^(\d)\.(\d+)/);return o&&{major:parseInt(o[1],10),minor:parseInt(o[2],10)}}function h(e){return void 0===e&&(e=p),"https://js.arcgis.com/".concat(e,"/")}function b(e,o){var t=function(e){return!e||m(e)?function(e){void 0===e&&(e=p);var o=h(e),t=m(e);if(t!==g&&3===t.major){var r=t.minor<=10?"js/":"";return"".concat(o).concat(r,"esri/css/esri.css")}return"".concat(o,"esri/themes/light/main.css")}(e):e}(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(t);return r||function(e,o){if(o){var t=document.querySelector(o);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}(r=function(e){var o=document.createElement("link");return o.rel="stylesheet",o.href=e,o}(t),o),r}var w={};function y(e,o,t){var r;t&&(r=function(e,o){var t=function(r){o(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}(e,t));var n=function(){o(e),e.removeEventListener("load",n,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",n,!1)}function x(){return document.querySelector("script[data-esri-loader]")}function C(){var e=window.require;return e&&e.on}function S(e){return new v.Promise((function(o,t){var r=window.require.on("error",t);window.require(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.remove(),o(e)}))}))}var T=a(726),k=a(3379),j=a.n(k),E=a(7795),z=a.n(E),I=a(569),L=a.n(I),N=a(3565),A=a.n(N),_=a(9216),M=a.n(_),B=a(4589),O=a.n(B),P=a(6097),R={};R.styleTagTransform=O(),R.setAttributes=A(),R.insert=L().bind(null,"head"),R.domAPI=z(),R.insertStyleElement=M(),j()(P.Z,R),P.Z&&P.Z.locals&&P.Z.locals;const W={uz:{_widgetLabel:"Sinov vidjeti",description:"Tilni o‘zgartirganda bu matn o‘zgaradi."},uzcryl:{_widgetLabel:"Синов виджети",description:"Тилни ўзгартирганда бу матн ўзгаради."},ru:{_widgetLabel:"Тестовый виджет",description:"Этот текст изменится при переключении языка."}};const $=r=>{var n,i,a,c,s,l,d,p,g,m,k,j,E,z,I,L,N,A,_,M,B,O,P,R,$;const q=localStorage.getItem("custom_locale")||"uz",[G,U]=(0,o.useState)(q),[Z,D]=(0,o.useState)(!1),[J,F]=(0,o.useState)(!1),[H,X]=(0,o.useState)({top:0,left:0,width:0}),[Y,K]=(0,o.useState)({bg:"",color:""}),[Q,V]=(0,o.useState)(0),[ee,oe]=(0,o.useState)(localStorage.getItem("customTheme")||"light");(0,o.useEffect)((()=>{const e=()=>oe(localStorage.getItem("customTheme")||"light");window.addEventListener("storage",e),window.addEventListener("custom-theme-changed",e);const o=setInterval((()=>{const e=localStorage.getItem("customTheme")||"light";e!==ee&&oe(e)}),100);return()=>{window.removeEventListener("storage",e),window.removeEventListener("custom-theme-changed",e),clearInterval(o)}}),[ee]);const te=(0,o.useRef)(null),re=W[G];(0,o.useEffect)((()=>{localStorage.setItem("custom_locale",G),window.dispatchEvent(new CustomEvent("custom-locale-changed",{detail:G}))}),[G]),(0,o.useEffect)((()=>{const e=e=>{const o=e.detail||localStorage.getItem("custom_locale")||"uz";U(o)};return window.addEventListener("custom-locale-changed",e),()=>window.removeEventListener("custom-locale-changed",e)}),[]);const[ne,ie]=(0,o.useState)(""),[ae,ce]=(0,o.useState)("");(0,o.useEffect)((()=>{const o=(()=>{var o,t;const r=(0,e.getAppStore)().getState(),n=null===(o=null==r?void 0:r.user)||void 0===o?void 0:o.firstName,i=null===(t=null==r?void 0:r.user)||void 0===t?void 0:t.lastName;return n||i?(console.log("First name:",n),console.log("Last name:",i),{firstName:n,lastName:i}):null})();o&&(ie(o.firstName),ce(o.lastName))}),[]);const se=(null===(n=r.config)||void 0===n?void 0:n.variant)||"default",le=(null===(c=null===(a=null===(i=r.config)||void 0===i?void 0:i.styleConfig)||void 0===a?void 0:a.themeStyle)||void 0===c?void 0:c.quickStyleType)||"default",de=!1!==(null===(l=null===(s=r.config)||void 0===s?void 0:s.styleConfig)||void 0===l?void 0:l.useCustom)?se:le,ue="default"!==de,fe=(null===(d=r.config)||void 0===d?void 0:d.displayMode)||"full",ve=(()=>{var e,o,t,n,i,a,c,s,l,d;const u="dark"===ee&&(null===(e=r.config)||void 0===e?void 0:e.enableDarkTheme);if(console.log("Theme debug:",{customTheme:ee,enableDarkTheme:null===(o=r.config)||void 0===o?void 0:o.enableDarkTheme,isDarkTheme:u,darkTheme:null===(t=r.config)||void 0===t?void 0:t.darkTheme,config:r.config}),u&&(null===(n=r.config)||void 0===n?void 0:n.darkTheme)){const e={bgColor:r.config.darkTheme.bgColor||"#2d2d2d",textColor:r.config.darkTheme.textColor||"#ffffff",hoverBgColor:r.config.darkTheme.hoverBgColor||"#404040",hoverTextColor:r.config.darkTheme.hoverTextColor||"#ffffff",borderColor:r.config.darkTheme.borderColor||"#555555",hoverBorderColor:r.config.darkTheme.hoverBorderColor||"#777777"};return console.log("Using dark colors:",e),e}const f={bgColor:(null===(i=r.config)||void 0===i?void 0:i.bgColor)||"#ffffff",textColor:(null===(a=r.config)||void 0===a?void 0:a.textColor)||"#000000",hoverBgColor:(null===(c=r.config)||void 0===c?void 0:c.hoverBgColor)||"#f0f0f0",hoverTextColor:(null===(s=r.config)||void 0===s?void 0:s.hoverTextColor)||"#000000",borderColor:(null===(l=r.config)||void 0===l?void 0:l.borderColor)||"#cccccc",hoverBorderColor:(null===(d=r.config)||void 0===d?void 0:d.hoverBorderColor)||"#999999"};return console.log("Using light colors:",f),f})();(0,o.useEffect)((()=>{if(te.current&&ue){const e=getComputedStyle(te.current);K({bg:e.backgroundColor,color:e.color})}}),[de,ee]),(0,o.useEffect)((()=>{const e=te.current;if(!e)return;const o=new ResizeObserver((e=>{for(const o of e)V(o.contentRect.width)}));return o.observe(e),()=>o.disconnect()}),[]);const pe={borderRadius:(null===(p=r.config)||void 0===p?void 0:p.borderRadius)||"0px",borderWidth:(null===(g=r.config)||void 0===g?void 0:g.borderWidth)||0,borderStyle:(null===(m=r.config)||void 0===m?void 0:m.borderStyle)||"",borderColor:(null===(k=r.config)||void 0===k?void 0:k.borderColor)||"",padding:(null===(j=r.config)||void 0===j?void 0:j.padding)||"",fontSize:(null===(E=r.config)||void 0===E?void 0:E.fontSize)||"14px",width:(null===(z=r.config)||void 0===z?void 0:z.width)||"fit-content",minWidth:(null===(I=r.config)||void 0===I?void 0:I.minWidth)||"fit-content",height:(null===(L=r.config)||void 0===L?void 0:L.height)||"100%",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},ge=ue?pe:Object.assign(Object.assign({},pe),{backgroundColor:ve.bgColor,color:ve.textColor,borderColor:ve.borderColor}),me=J?{backgroundColor:ve.hoverBgColor,color:ve.hoverTextColor,borderColor:ve.hoverBorderColor}:{},he=Object.assign(Object.assign({},ge),me),be="full"===fe||"label"===fe||"auto"===fe&&Q>100,we="full"===fe||"auto"===fe&&Q>60,ye=Z&&(0,e.jsx)("div",{className:"dropdown",style:{top:H.top,left:H.left,width:H.width,position:"absolute",zIndex:9999,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",backgroundColor:ue?Y.bg:ve.bgColor,border:(null===(N=r.config)||void 0===N?void 0:N.borderWidth)&&parseInt(r.config.borderWidth)>0?`${r.config.borderWidth} solid ${ve.borderColor}`:"none",borderRadius:(null===(A=r.config)||void 0===A?void 0:A.borderRadius)||"0px"}},(0,e.jsx)("div",{className:"dropdown-item",onClick:()=>{return e=void 0,o=void 0,r=function*(){try{console.log("Начало процесса logout");const[e]=yield function(e,o){if(void 0===o&&(o={}),C())return S(e);var t=x(),r=t&&t.getAttribute("src");return!o.url&&r&&(o.url=r),function(e){void 0===e&&(e={});var o={};[w,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}));var t=o.version,r=o.url||h(t);return new v.Promise((function(e,n){var i=x();if(i){var a=i.getAttribute("src");a!==r?n(new Error("The ArcGIS API for JavaScript is already loaded (".concat(a,")."))):C()?e(i):y(i,e,n)}else if(C())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var c=o.css;c&&b(!0===c?t:c,o.insertCssBefore),i=function(e){var o=document.createElement("script");return o.type="text/javascript",o.src=e,o.setAttribute("data-esri-loader","loading"),o}(r),y(i,(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),n),document.body.appendChild(i)}}))}(o).then((function(){return S(e)}))}(["esri/identity/IdentityManager"]);e.destroyCredentials(),sessionStorage.clear(),localStorage.clear(),document.cookie.split(";").forEach((e=>{const[o]=e.trim().split("=");document.cookie=`${o}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=gis.uzspace.uz`,document.cookie=`${o}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=.uzspace.uz`,document.cookie=`${o}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`}));const o="https://gis.uzspace.uz/uzspace/sharing/rest/oauth2/signout?redirect_uri=https://gis.uzspace.uz/uzspace/home/signin.html";window.location.href=o,setTimeout((()=>{console.log("Принудительное перенаправление на страницу логина"),window.location.href="https://gis.uzspace.uz/uzspace/home/signin.html"}),1e3)}catch(e){console.error("Ошибка при logout:",e),window.location.href="https://gis.uzspace.uz/uzspace/home/signin.html"}},new((t=void 0)||(t=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,c)}s((r=r.apply(e,o||[])).next())}));var e,o,t,r},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=ve.hoverBgColor},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=""},style:{backgroundColor:ue?Y.bg:ve.bgColor,color:ue?Y.color:ve.textColor,padding:"6px 5px",cursor:"pointer",transition:"all 0.2s ease"}},re.logout||"Выйти из ArcGIS"," "));let xe=(null===(_=r.config.icon)||void 0===_?void 0:_.svg)||"";/fill=/.test(xe.split(">")[0])||(xe=xe.replace("<svg",'<svg fill="currentColor"')),xe=xe.replace(/fill="[^"]*"/g,'fill="currentColor"');const Ce=(null===(B=null===(M=r.config.icon)||void 0===M?void 0:M.properties)||void 0===B?void 0:B.color)||ve.textColor,Se={width:(null===(O=r.config.iconSize)||void 0===O?void 0:O.width)||"24px",height:(null===(P=r.config.iconSize)||void 0===P?void 0:P.height)||"24px"},Te=r.config.iconPosition||"left",ke=(null===($=null===(R=r.config)||void 0===R?void 0:R.icon)||void 0===$?void 0:$.svg)&&"label"!==fe?(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:xe},style:Object.assign(Object.assign({},Se),{color:Ce,display:"inline-block",flexShrink:0,verticalAlign:"middle"})}):null,je="full"===fe||"auto"===fe?"space-between":"center";return(0,e.jsx)("div",{className:"jimu-widget logout-widget"},(0,e.jsx)(T.Button,{ref:te,type:ue?de:void 0,className:ue?"":"dynamic-hover logout-btn",style:he,onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),onClick:()=>{if(te.current){const e=te.current.getBoundingClientRect();X({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}D((e=>!e))}},(0,e.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:je,gap:"5px",width:"100%",overflow:"hidden",whiteSpace:"nowrap"}},"left"===Te&&ke,be&&(0,e.jsx)("span",{style:{display:"flex",alignItems:"center",gap:"6px",marginInline:"6px",whiteSpace:"nowrap"}},ne&&ae?`${ne} ${ae}`:"Выйти из ArcGIS"),"right"===Te&&ke,we&&(0,e.jsx)("span",{className:"arrow",style:{display:"flex",alignItems:"center",flexShrink:0}},Z?(0,e.jsx)(u,{size:20}):(0,e.jsx)(f,{size:20})))),t.default.createPortal(ye,document.body))};function q(e){a.p=e}})(),c})())}}}));